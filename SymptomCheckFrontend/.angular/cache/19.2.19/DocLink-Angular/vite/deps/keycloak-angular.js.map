{
  "version": 3,
  "sources": ["../../../../../../node_modules/keycloak-js/lib/keycloak.js", "../../../../../../node_modules/keycloak-angular/fesm2022/keycloak-angular.mjs"],
  "sourcesContent": ["// @ts-check\n/**\n * @import {Acr, KeycloakAccountOptions, KeycloakAdapter, KeycloakConfig, KeycloakError, KeycloakFlow, KeycloakInitOptions, KeycloakLoginOptions, KeycloakLogoutOptions, KeycloakPkceMethod, KeycloakProfile, KeycloakRegisterOptions, KeycloakResourceAccess, KeycloakResponseMode, KeycloakResponseType, KeycloakRoles, KeycloakTokenParsed, OpenIdProviderMetadata} from \"./keycloak.ts\"\n */\n/*\n * Copyright 2016 Red Hat, Inc. and/or its affiliates\n * and other contributors as indicated by the @author tags.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nconst CONTENT_TYPE_JSON = 'application/json';\n\n/**\n * @typedef {Object} Endpoints\n * @property {() => string} authorize\n * @property {() => string} token\n * @property {() => string} logout\n * @property {() => string} checkSessionIframe\n * @property {() => string=} thirdPartyCookiesIframe\n * @property {() => string} register\n * @property {() => string} userinfo\n */\n\n/**\n * @typedef {Object} LoginIframe\n * @property {boolean} enable\n * @property {((error: Error | null, value?: boolean) => void)[]} callbackList\n * @property {number} interval\n * @property {HTMLIFrameElement=} iframe\n * @property {string=} iframeOrigin\n */\n\nexport default class Keycloak {\n  /** @type {Pick<PromiseWithResolvers<boolean>, 'resolve' | 'reject'>[]} */\n  #refreshQueue = [];\n  /** @type {KeycloakAdapter} */\n  #adapter;\n  /** @type {boolean} */\n  #useNonce = true;\n  /** @type {CallbackStorage} */\n  #callbackStorage;\n  #logInfo = this.#createLogger(console.info);\n  #logWarn = this.#createLogger(console.warn);\n  /** @type {LoginIframe} */\n  #loginIframe = {\n    enable: true,\n    callbackList: [],\n    interval: 5\n  };\n\n  /** @type {KeycloakConfig} config */\n  #config;\n  didInitialize = false;\n  authenticated = false;\n  loginRequired = false;\n  /** @type {KeycloakResponseMode} */\n  responseMode = 'fragment';\n  /** @type {KeycloakResponseType} */\n  responseType = 'code';\n  /** @type {KeycloakFlow} */\n  flow = 'standard';\n  /** @type {number?} */\n  timeSkew = null;\n  /** @type {string=} */\n  redirectUri;\n  /** @type {string=} */\n  silentCheckSsoRedirectUri;\n  /** @type {boolean} */\n  silentCheckSsoFallback = true;\n  /** @type {KeycloakPkceMethod} */\n  pkceMethod = 'S256';\n  enableLogging = false;\n  /** @type {'GET' | 'POST'} */\n  logoutMethod = 'GET';\n  /** @type {string=} */\n  scope;\n  messageReceiveTimeout = 10000;\n  /** @type {string=} */\n  idToken;\n  /** @type {KeycloakTokenParsed=} */\n  idTokenParsed;\n  /** @type {string=} */\n  token;\n  /** @type {KeycloakTokenParsed=} */\n  tokenParsed;\n  /** @type {string=} */\n  refreshToken;\n  /** @type {KeycloakTokenParsed=} */\n  refreshTokenParsed;\n  /** @type {string=} */\n  clientId;\n  /** @type {string=} */\n  sessionId;\n  /** @type {string=} */\n  subject;\n  /** @type {string=} */\n  authServerUrl;\n  /** @type {string=} */\n  realm;\n  /** @type {KeycloakRoles=} */\n  realmAccess;\n  /** @type {KeycloakResourceAccess=} */\n  resourceAccess;\n  /** @type {KeycloakProfile=} */\n  profile;\n  /** @type {{}=} */\n  userInfo;\n  /** @type {Endpoints} */\n  endpoints;\n  /** @type {number=} */\n  tokenTimeoutHandle;\n  /** @type {() => void=} */\n  onAuthSuccess;\n  /** @type {(errorData?: KeycloakError) => void=} */\n  onAuthError;\n  /** @type {() => void=} */\n  onAuthRefreshSuccess;\n  /** @type {() => void=} */\n  onAuthRefreshError;\n  /** @type {() => void=} */\n  onTokenExpired;\n  /** @type {() => void=} */\n  onAuthLogout;\n  /** @type {(authenticated: boolean) => void=} */\n  onReady;\n  /** @type {(status: 'success' | 'cancelled' | 'error', action: string) => void=} */\n  onActionUpdate;\n\n  /**\n   * @param {KeycloakConfig} config\n   */\n  constructor(config) {\n    if (typeof config !== 'string' && !isObject(config)) {\n      throw new Error(\"The 'Keycloak' constructor must be provided with a configuration object, or a URL to a JSON configuration file.\");\n    }\n    if (isObject(config)) {\n      const requiredProperties = 'oidcProvider' in config ? ['clientId'] : ['url', 'realm', 'clientId'];\n      for (const property of requiredProperties) {\n        if (!(property in config)) {\n          throw new Error(`The configuration object is missing the required '${property}' property.`);\n        }\n      }\n    }\n    if (!globalThis.isSecureContext) {\n      this.#logWarn(\"[KEYCLOAK] Keycloak JS must be used in a 'secure context' to function properly as it relies on browser APIs that are otherwise not available.\\n\" + 'Continuing to run your application insecurely will lead to unexpected behavior and breakage.\\n\\n' + 'For more information see: https://developer.mozilla.org/en-US/docs/Web/Security/Secure_Contexts');\n    }\n    this.#config = config;\n  }\n\n  /**\n   * @param {KeycloakInitOptions} initOptions\n   * @returns {Promise<boolean>}\n   */\n  async init(initOptions = {}) {\n    if (this.didInitialize) {\n      throw new Error(\"A 'Keycloak' instance can only be initialized once.\");\n    }\n    this.didInitialize = true;\n    this.#callbackStorage = createCallbackStorage();\n    const adapters = ['default', 'cordova', 'cordova-native'];\n    if (typeof initOptions.adapter === 'string' && adapters.includes(initOptions.adapter)) {\n      this.#adapter = this.#loadAdapter(initOptions.adapter);\n    } else if (typeof initOptions.adapter === 'object') {\n      this.#adapter = initOptions.adapter;\n    } else if ('Cordova' in window || 'cordova' in window) {\n      this.#adapter = this.#loadAdapter('cordova');\n    } else {\n      this.#adapter = this.#loadAdapter('default');\n    }\n    if (typeof initOptions.useNonce !== 'undefined') {\n      this.#useNonce = initOptions.useNonce;\n    }\n    if (typeof initOptions.checkLoginIframe !== 'undefined') {\n      this.#loginIframe.enable = initOptions.checkLoginIframe;\n    }\n    if (initOptions.checkLoginIframeInterval) {\n      this.#loginIframe.interval = initOptions.checkLoginIframeInterval;\n    }\n    if (initOptions.onLoad === 'login-required') {\n      this.loginRequired = true;\n    }\n    if (initOptions.responseMode) {\n      if (initOptions.responseMode === 'query' || initOptions.responseMode === 'fragment') {\n        this.responseMode = initOptions.responseMode;\n      } else {\n        throw new Error('Invalid value for responseMode');\n      }\n    }\n    if (initOptions.flow) {\n      switch (initOptions.flow) {\n        case 'standard':\n          this.responseType = 'code';\n          break;\n        case 'implicit':\n          this.responseType = 'id_token token';\n          break;\n        case 'hybrid':\n          this.responseType = 'code id_token token';\n          break;\n        default:\n          throw new Error('Invalid value for flow');\n      }\n      this.flow = initOptions.flow;\n    }\n    if (typeof initOptions.timeSkew === 'number') {\n      this.timeSkew = initOptions.timeSkew;\n    }\n    if (initOptions.redirectUri) {\n      this.redirectUri = initOptions.redirectUri;\n    }\n    if (initOptions.silentCheckSsoRedirectUri) {\n      this.silentCheckSsoRedirectUri = initOptions.silentCheckSsoRedirectUri;\n    }\n    if (typeof initOptions.silentCheckSsoFallback === 'boolean') {\n      this.silentCheckSsoFallback = initOptions.silentCheckSsoFallback;\n    }\n    if (typeof initOptions.pkceMethod !== 'undefined') {\n      if (initOptions.pkceMethod !== 'S256' && initOptions.pkceMethod !== false) {\n        throw new TypeError(`Invalid value for pkceMethod', expected 'S256' or false but got ${initOptions.pkceMethod}.`);\n      }\n      this.pkceMethod = initOptions.pkceMethod;\n    }\n    if (typeof initOptions.enableLogging === 'boolean') {\n      this.enableLogging = initOptions.enableLogging;\n    }\n    if (initOptions.logoutMethod === 'POST') {\n      this.logoutMethod = 'POST';\n    }\n    if (typeof initOptions.scope === 'string') {\n      this.scope = initOptions.scope;\n    }\n    if (typeof initOptions.messageReceiveTimeout === 'number' && initOptions.messageReceiveTimeout > 0) {\n      this.messageReceiveTimeout = initOptions.messageReceiveTimeout;\n    }\n    await this.#loadConfig();\n    await this.#check3pCookiesSupported();\n    await this.#processInit(initOptions);\n    this.onReady?.(this.authenticated);\n    return this.authenticated;\n  }\n\n  /**\n   * @param {\"default\" | \"cordova\" | \"cordova-native\"} type\n   * @returns {KeycloakAdapter}\n   */\n  #loadAdapter(type) {\n    if (type === 'default') {\n      return this.#loadDefaultAdapter();\n    }\n    if (type === 'cordova') {\n      this.#loginIframe.enable = false;\n      return this.#loadCordovaAdapter();\n    }\n    if (type === 'cordova-native') {\n      this.#loginIframe.enable = false;\n      return this.#loadCordovaNativeAdapter();\n    }\n    throw new Error('invalid adapter type: ' + type);\n  }\n\n  /**\n   * @returns {KeycloakAdapter}\n   */\n  #loadDefaultAdapter() {\n    /** @type {KeycloakAdapter['redirectUri']}{} */\n    const redirectUri = options => {\n      return options?.redirectUri || this.redirectUri || globalThis.location.href;\n    };\n    return {\n      login: async options => {\n        window.location.assign(await this.createLoginUrl(options));\n        return await new Promise(() => {});\n      },\n      logout: async options => {\n        const logoutMethod = options?.logoutMethod ?? this.logoutMethod;\n        if (logoutMethod === 'GET') {\n          window.location.replace(this.createLogoutUrl(options));\n          return;\n        }\n\n        // Create form to send POST request.\n        const form = document.createElement('form');\n        form.setAttribute('method', 'POST');\n        form.setAttribute('action', this.createLogoutUrl(options));\n        form.style.display = 'none';\n\n        // Add data to form as hidden input fields.\n        const data = {\n          id_token_hint: this.idToken,\n          client_id: this.clientId,\n          post_logout_redirect_uri: redirectUri(options)\n        };\n        for (const [name, value] of Object.entries(data)) {\n          const input = document.createElement('input');\n          input.setAttribute('type', 'hidden');\n          input.setAttribute('name', name);\n          input.setAttribute('value', /** @type {string} */value);\n          form.appendChild(input);\n        }\n\n        // Append form to page and submit it to perform logout and redirect.\n        document.body.appendChild(form);\n        form.submit();\n      },\n      register: async options => {\n        window.location.assign(await this.createRegisterUrl(options));\n        return await new Promise(() => {});\n      },\n      accountManagement: async () => {\n        const accountUrl = this.createAccountUrl();\n        if (typeof accountUrl !== 'undefined') {\n          window.location.href = accountUrl;\n        } else {\n          throw new Error('Not supported by the OIDC server');\n        }\n        return await new Promise(() => {});\n      },\n      redirectUri\n    };\n  }\n\n  /**\n   * @returns {KeycloakAdapter}\n   */\n  #loadCordovaAdapter() {\n    /**\n     * @param {string} loginUrl\n     * @param {string} target\n     * @param {string} options\n     * @returns {WindowProxy | null}\n     */\n    const cordovaOpenWindowWrapper = (loginUrl, target, options) => {\n      if (window.cordova && window.cordova.InAppBrowser) {\n        // Use inappbrowser for IOS and Android if available\n        return window.cordova.InAppBrowser.open(loginUrl, target, options);\n      } else {\n        return window.open(loginUrl, target, options);\n      }\n    };\n    const shallowCloneCordovaOptions = userOptions => {\n      if (userOptions && userOptions.cordovaOptions) {\n        return Object.keys(userOptions.cordovaOptions).reduce((options, optionName) => {\n          options[optionName] = userOptions.cordovaOptions[optionName];\n          return options;\n        }, {});\n      } else {\n        return {};\n      }\n    };\n    const formatCordovaOptions = cordovaOptions => {\n      return Object.keys(cordovaOptions).reduce((options, optionName) => {\n        options.push(optionName + '=' + cordovaOptions[optionName]);\n        return options;\n      }, []).join(',');\n    };\n    const createCordovaOptions = userOptions => {\n      const cordovaOptions = shallowCloneCordovaOptions(userOptions);\n      cordovaOptions.location = 'no';\n      if (userOptions && userOptions.prompt === 'none') {\n        cordovaOptions.hidden = 'yes';\n      }\n      return formatCordovaOptions(cordovaOptions);\n    };\n    const getCordovaRedirectUri = () => {\n      return this.redirectUri || 'http://localhost';\n    };\n    return {\n      login: async options => {\n        const cordovaOptions = createCordovaOptions(options);\n        const loginUrl = await this.createLoginUrl(options);\n        const ref = cordovaOpenWindowWrapper(loginUrl, '_blank', cordovaOptions);\n        let completed = false;\n        let closed = false;\n        function closeBrowser() {\n          closed = true;\n          ref.close();\n        }\n        ;\n        return await new Promise((resolve, reject) => {\n          ref.addEventListener('loadstart', async event => {\n            if (event.url.indexOf(getCordovaRedirectUri()) === 0) {\n              const callback = this.#parseCallback(event.url);\n              try {\n                await this.#processCallback(callback);\n                resolve();\n              } catch (error) {\n                reject(error);\n              }\n              closeBrowser();\n              completed = true;\n            }\n          });\n          ref.addEventListener('loaderror', async event => {\n            if (!completed) {\n              if (event.url.indexOf(getCordovaRedirectUri()) === 0) {\n                const callback = this.#parseCallback(event.url);\n                try {\n                  await this.#processCallback(callback);\n                  resolve();\n                } catch (error) {\n                  reject(error);\n                }\n                closeBrowser();\n                completed = true;\n              } else {\n                reject(new Error('Unable to process login.'));\n                closeBrowser();\n              }\n            }\n          });\n          ref.addEventListener('exit', function (event) {\n            if (!closed) {\n              reject(new Error('User closed the login window.'));\n            }\n          });\n        });\n      },\n      logout: async options => {\n        const logoutUrl = this.createLogoutUrl(options);\n        const ref = cordovaOpenWindowWrapper(logoutUrl, '_blank', 'location=no,hidden=yes,clearcache=yes');\n        let error = false;\n        ref.addEventListener('loadstart', event => {\n          if (event.url.indexOf(getCordovaRedirectUri()) === 0) {\n            ref.close();\n          }\n        });\n        ref.addEventListener('loaderror', event => {\n          if (event.url.indexOf(getCordovaRedirectUri()) === 0) {\n            ref.close();\n          } else {\n            error = true;\n            ref.close();\n          }\n        });\n        await new Promise((resolve, reject) => {\n          ref.addEventListener('exit', () => {\n            if (error) {\n              reject(new Error('User closed the login window.'));\n            } else {\n              this.clearToken();\n              resolve();\n            }\n          });\n        });\n      },\n      register: async options => {\n        const registerUrl = await this.createRegisterUrl();\n        const cordovaOptions = createCordovaOptions(options);\n        const ref = cordovaOpenWindowWrapper(registerUrl, '_blank', cordovaOptions);\n\n        /** @type {Promise<void>} */\n        const promise = new Promise((resolve, reject) => {\n          ref.addEventListener('loadstart', async event => {\n            if (event.url.indexOf(getCordovaRedirectUri()) === 0) {\n              ref.close();\n              const oauth = this.#parseCallback(event.url);\n              try {\n                await this.#processCallback(oauth);\n                resolve();\n              } catch (error) {\n                reject(error);\n              }\n            }\n          });\n        });\n        await promise;\n      },\n      accountManagement: async () => {\n        const accountUrl = this.createAccountUrl();\n        if (typeof accountUrl !== 'undefined') {\n          const ref = cordovaOpenWindowWrapper(accountUrl, '_blank', 'location=no');\n          ref.addEventListener('loadstart', function (event) {\n            if (event.url.indexOf(getCordovaRedirectUri()) === 0) {\n              ref.close();\n            }\n          });\n        } else {\n          throw new Error('Not supported by the OIDC server');\n        }\n      },\n      redirectUri: () => {\n        return getCordovaRedirectUri();\n      }\n    };\n  }\n\n  /**\n   * @returns {KeycloakAdapter}\n   */\n  #loadCordovaNativeAdapter() {\n    /* global universalLinks */\n    return {\n      login: async options => {\n        const loginUrl = await this.createLoginUrl(options);\n        await new Promise((resolve, reject) => {\n          universalLinks.subscribe('keycloak', async event => {\n            universalLinks.unsubscribe('keycloak');\n            window.cordova.plugins.browsertab.close();\n            const oauth = this.#parseCallback(event.url);\n            try {\n              await this.#processCallback(oauth);\n              resolve();\n            } catch (error) {\n              reject(error);\n            }\n          });\n          window.cordova.plugins.browsertab.openUrl(loginUrl);\n        });\n      },\n      logout: async options => {\n        const logoutUrl = this.createLogoutUrl(options);\n        await new Promise(resolve => {\n          universalLinks.subscribe('keycloak', () => {\n            universalLinks.unsubscribe('keycloak');\n            window.cordova.plugins.browsertab.close();\n            this.clearToken();\n            resolve();\n          });\n          window.cordova.plugins.browsertab.openUrl(logoutUrl);\n        });\n      },\n      register: async options => {\n        const registerUrl = await this.createRegisterUrl(options);\n        await new Promise((resolve, reject) => {\n          universalLinks.subscribe('keycloak', async event => {\n            universalLinks.unsubscribe('keycloak');\n            window.cordova.plugins.browsertab.close();\n            const oauth = this.#parseCallback(event.url);\n            try {\n              await this.#processCallback(oauth);\n              resolve();\n            } catch (error) {\n              reject(error);\n            }\n          });\n          window.cordova.plugins.browsertab.openUrl(registerUrl);\n        });\n      },\n      accountManagement: async () => {\n        const accountUrl = this.createAccountUrl();\n        if (typeof accountUrl !== 'undefined') {\n          window.cordova.plugins.browsertab.openUrl(accountUrl);\n        } else {\n          throw new Error('Not supported by the OIDC server');\n        }\n      },\n      redirectUri: options => {\n        if (options && options.redirectUri) {\n          return options.redirectUri;\n        } else if (this.redirectUri) {\n          return this.redirectUri;\n        } else {\n          return 'http://localhost';\n        }\n      }\n    };\n  }\n\n  /**\n   * @returns {Promise<void>}\n   */\n  async #loadConfig() {\n    if (typeof this.#config === 'string') {\n      const jsonConfig = await fetchJsonConfig(this.#config);\n      this.authServerUrl = jsonConfig['auth-server-url'];\n      this.realm = jsonConfig.realm;\n      this.clientId = jsonConfig.resource;\n      this.#setupEndpoints();\n    } else {\n      this.clientId = this.#config.clientId;\n      if ('oidcProvider' in this.#config) {\n        await this.#loadOidcConfig(this.#config.oidcProvider);\n      } else {\n        this.authServerUrl = this.#config.url;\n        this.realm = this.#config.realm;\n        this.#setupEndpoints();\n      }\n    }\n  }\n\n  /**\n   * @returns {void}\n   */\n  #setupEndpoints() {\n    this.endpoints = {\n      authorize: () => {\n        return this.#getRealmUrl() + '/protocol/openid-connect/auth';\n      },\n      token: () => {\n        return this.#getRealmUrl() + '/protocol/openid-connect/token';\n      },\n      logout: () => {\n        return this.#getRealmUrl() + '/protocol/openid-connect/logout';\n      },\n      checkSessionIframe: () => {\n        return this.#getRealmUrl() + '/protocol/openid-connect/login-status-iframe.html';\n      },\n      thirdPartyCookiesIframe: () => {\n        return this.#getRealmUrl() + '/protocol/openid-connect/3p-cookies/step1.html';\n      },\n      register: () => {\n        return this.#getRealmUrl() + '/protocol/openid-connect/registrations';\n      },\n      userinfo: () => {\n        return this.#getRealmUrl() + '/protocol/openid-connect/userinfo';\n      }\n    };\n  }\n\n  /**\n   * @param {string | OpenIdProviderMetadata} oidcProvider\n   * @returns {Promise<void>}\n   */\n  async #loadOidcConfig(oidcProvider) {\n    if (typeof oidcProvider === 'string') {\n      const url = `${stripTrailingSlash(oidcProvider)}/.well-known/openid-configuration`;\n      const openIdConfig = await fetchOpenIdConfig(url);\n      this.#setupOidcEndpoints(openIdConfig);\n    } else {\n      this.#setupOidcEndpoints(oidcProvider);\n    }\n  }\n\n  /**\n   * @param {OpenIdProviderMetadata} config\n   * @returns {void}\n   */\n  #setupOidcEndpoints(config) {\n    this.endpoints = {\n      authorize() {\n        return config.authorization_endpoint;\n      },\n      token() {\n        return config.token_endpoint;\n      },\n      logout() {\n        if (!config.end_session_endpoint) {\n          throw new Error('Not supported by the OIDC server');\n        }\n        return config.end_session_endpoint;\n      },\n      checkSessionIframe() {\n        if (!config.check_session_iframe) {\n          throw new Error('Not supported by the OIDC server');\n        }\n        return config.check_session_iframe;\n      },\n      register() {\n        throw new Error('Redirection to \"Register user\" page not supported in standard OIDC mode');\n      },\n      userinfo() {\n        if (!config.userinfo_endpoint) {\n          throw new Error('Not supported by the OIDC server');\n        }\n        return config.userinfo_endpoint;\n      }\n    };\n  }\n\n  /**\n   * @returns {Promise<void>}\n   */\n  async #check3pCookiesSupported() {\n    if (!this.#loginIframe.enable && !this.silentCheckSsoRedirectUri || typeof this.endpoints.thirdPartyCookiesIframe !== 'function') {\n      return;\n    }\n    const iframe = document.createElement('iframe');\n    iframe.setAttribute('src', this.endpoints.thirdPartyCookiesIframe());\n    iframe.setAttribute('sandbox', 'allow-storage-access-by-user-activation allow-scripts allow-same-origin');\n    iframe.setAttribute('title', 'keycloak-3p-check-iframe');\n    iframe.style.display = 'none';\n    document.body.appendChild(iframe);\n\n    /** @type {Promise<void>} */\n    const promise = new Promise(resolve => {\n      /**\n       * @param {MessageEvent} event\n       */\n      const messageCallback = event => {\n        if (iframe.contentWindow !== event.source) {\n          return;\n        }\n        if (event.data !== 'supported' && event.data !== 'unsupported') {\n          return;\n        } else if (event.data === 'unsupported') {\n          this.#logWarn('[KEYCLOAK] Your browser is blocking access to 3rd-party cookies, this means:\\n\\n' + ' - It is not possible to retrieve tokens without redirecting to the Keycloak server (a.k.a. no support for silent authentication).\\n' + ' - It is not possible to automatically detect changes to the session status (such as the user logging out in another tab).\\n\\n' + 'For more information see: https://www.keycloak.org/securing-apps/javascript-adapter#_modern_browsers');\n          this.#loginIframe.enable = false;\n          if (this.silentCheckSsoFallback) {\n            this.silentCheckSsoRedirectUri = undefined;\n          }\n        }\n        document.body.removeChild(iframe);\n        window.removeEventListener('message', messageCallback);\n        resolve();\n      };\n      window.addEventListener('message', messageCallback, false);\n    });\n    return await applyTimeoutToPromise(promise, this.messageReceiveTimeout, 'Timeout when waiting for 3rd party check iframe message.');\n  }\n\n  /**\n   * @param {KeycloakInitOptions} initOptions\n   * @returns {Promise<void>}\n   */\n  async #processInit(initOptions) {\n    const callback = this.#parseCallback(window.location.href);\n    if (callback?.redirectUri) {\n      window.history.replaceState(window.history.state, '', callback.redirectUri);\n    }\n    if (callback && callback.valid) {\n      await this.#setupCheckLoginIframe();\n      await this.#processCallback(callback);\n      return;\n    }\n\n    /** @param {boolean} prompt */\n    const doLogin = async prompt => {\n      /** @type {KeycloakLoginOptions} */\n      const options = {};\n      if (!prompt) {\n        options.prompt = 'none';\n      }\n      if (initOptions.locale) {\n        options.locale = initOptions.locale;\n      }\n      await this.login(options);\n    };\n    const onLoad = async () => {\n      switch (initOptions.onLoad) {\n        case 'check-sso':\n          if (this.#loginIframe.enable) {\n            await this.#setupCheckLoginIframe();\n            const unchanged = await this.#checkLoginIframe();\n            if (!unchanged) {\n              this.silentCheckSsoRedirectUri ? await this.#checkSsoSilently() : await doLogin(false);\n            }\n          } else {\n            this.silentCheckSsoRedirectUri ? await this.#checkSsoSilently() : await doLogin(false);\n          }\n          break;\n        case 'login-required':\n          await doLogin(true);\n          break;\n        default:\n          throw new Error('Invalid value for onLoad');\n      }\n    };\n    if (initOptions.token && initOptions.refreshToken) {\n      this.#setToken(initOptions.token, initOptions.refreshToken, initOptions.idToken);\n      if (this.#loginIframe.enable) {\n        await this.#setupCheckLoginIframe();\n        const unchanged = await this.#checkLoginIframe();\n        if (unchanged) {\n          this.onAuthSuccess?.();\n          this.#scheduleCheckIframe();\n        }\n      } else {\n        try {\n          await this.updateToken(-1);\n          this.onAuthSuccess?.();\n        } catch (error) {\n          this.onAuthError?.();\n          if (initOptions.onLoad) {\n            await onLoad();\n          } else {\n            throw error;\n          }\n        }\n      }\n    } else if (initOptions.onLoad) {\n      await onLoad();\n    }\n  }\n\n  /**\n   * @returns {Promise<void>}\n   */\n  async #setupCheckLoginIframe() {\n    if (!this.#loginIframe.enable || this.#loginIframe.iframe) {\n      return;\n    }\n    const iframe = document.createElement('iframe');\n    this.#loginIframe.iframe = iframe;\n    iframe.setAttribute('src', this.endpoints.checkSessionIframe());\n    iframe.setAttribute('sandbox', 'allow-storage-access-by-user-activation allow-scripts allow-same-origin');\n    iframe.setAttribute('title', 'keycloak-session-iframe');\n    iframe.style.display = 'none';\n    document.body.appendChild(iframe);\n\n    /**\n     * @param {MessageEvent} event\n     */\n    const messageCallback = event => {\n      if (event.origin !== this.#loginIframe.iframeOrigin || this.#loginIframe.iframe?.contentWindow !== event.source) {\n        return;\n      }\n      if (!(event.data === 'unchanged' || event.data === 'changed' || event.data === 'error')) {\n        return;\n      }\n      if (event.data !== 'unchanged') {\n        this.clearToken();\n      }\n      const callbacks = this.#loginIframe.callbackList;\n      this.#loginIframe.callbackList = [];\n      for (const callback of callbacks.reverse()) {\n        if (event.data === 'error') {\n          callback(new Error('Error while checking login iframe'));\n        } else {\n          callback(null, event.data === 'unchanged');\n        }\n      }\n    };\n    window.addEventListener('message', messageCallback, false);\n\n    /** @type {Promise<void>} */\n    const promise = new Promise(resolve => {\n      iframe.addEventListener('load', () => {\n        const authUrl = this.endpoints.authorize();\n        if (authUrl.startsWith('/')) {\n          this.#loginIframe.iframeOrigin = globalThis.location.origin;\n        } else {\n          this.#loginIframe.iframeOrigin = new URL(authUrl).origin;\n        }\n        resolve();\n      });\n    });\n    await promise;\n  }\n\n  /**\n   * @returns {Promise<boolean | undefined>}\n   */\n  async #checkLoginIframe() {\n    if (!this.#loginIframe.iframe || !this.#loginIframe.iframeOrigin) {\n      return;\n    }\n    const message = `${this.clientId} ${this.sessionId ? this.sessionId : ''}`;\n    const origin = this.#loginIframe.iframeOrigin;\n\n    /** @type {Promise<boolean>} */\n    const promise = new Promise((resolve, reject) => {\n      /** @type {(error: Error | null, value?: boolean) => void} */\n      const callback = (error, result) => error ? reject(error) : resolve(/** @type {boolean} */result);\n      this.#loginIframe.callbackList.push(callback);\n      if (this.#loginIframe.callbackList.length === 1) {\n        this.#loginIframe.iframe?.contentWindow?.postMessage(message, origin);\n      }\n    });\n    return await promise;\n  }\n\n  /**\n   * @returns {Promise<void>}\n   */\n  async #checkSsoSilently() {\n    const iframe = document.createElement('iframe');\n    const src = await this.createLoginUrl({\n      prompt: 'none',\n      redirectUri: this.silentCheckSsoRedirectUri\n    });\n    iframe.setAttribute('src', src);\n    iframe.setAttribute('sandbox', 'allow-storage-access-by-user-activation allow-scripts allow-same-origin');\n    iframe.setAttribute('title', 'keycloak-silent-check-sso');\n    iframe.style.display = 'none';\n    document.body.appendChild(iframe);\n    return await new Promise((resolve, reject) => {\n      /**\n       * @param {MessageEvent} event\n       */\n      const messageCallback = async event => {\n        if (event.origin !== window.location.origin || iframe.contentWindow !== event.source) {\n          return;\n        }\n        const oauth = this.#parseCallback(event.data);\n        try {\n          await this.#processCallback(oauth);\n          resolve();\n        } catch (error) {\n          reject(error);\n        }\n        document.body.removeChild(iframe);\n        window.removeEventListener('message', messageCallback);\n      };\n      window.addEventListener('message', messageCallback);\n    });\n  }\n  /**\n   * @param {string} url\n   */\n  #parseCallback(url) {\n    const oauth = this.#parseCallbackUrl(url);\n    if (!oauth) {\n      return;\n    }\n    const oauthState = this.#callbackStorage.get(oauth.state);\n    if (oauthState) {\n      oauth.valid = true;\n      oauth.redirectUri = oauthState.redirectUri;\n      oauth.storedNonce = oauthState.nonce;\n      oauth.prompt = oauthState.prompt;\n      oauth.pkceCodeVerifier = oauthState.pkceCodeVerifier;\n      oauth.loginOptions = oauthState.loginOptions;\n    }\n    return oauth;\n  }\n\n  /**\n   * @param {string} urlString\n   */\n  #parseCallbackUrl(urlString) {\n    let supportedParams = [];\n    switch (this.flow) {\n      case 'standard':\n        supportedParams = ['code', 'state', 'session_state', 'kc_action_status', 'kc_action', 'iss'];\n        break;\n      case 'implicit':\n        supportedParams = ['access_token', 'token_type', 'id_token', 'state', 'session_state', 'expires_in', 'kc_action_status', 'kc_action', 'iss'];\n        break;\n      case 'hybrid':\n        supportedParams = ['access_token', 'token_type', 'id_token', 'code', 'state', 'session_state', 'expires_in', 'kc_action_status', 'kc_action', 'iss'];\n        break;\n    }\n    supportedParams.push('error');\n    supportedParams.push('error_description');\n    supportedParams.push('error_uri');\n    const url = new URL(urlString);\n    let redirectUri = '';\n    let parsed;\n    if (this.responseMode === 'query' && url.searchParams.size > 0) {\n      parsed = this.#parseCallbackParams(url.search, supportedParams);\n      url.search = parsed.paramsString;\n      redirectUri = url.toString();\n    } else if (this.responseMode === 'fragment' && url.hash.length > 0) {\n      parsed = this.#parseCallbackParams(url.hash.substring(1), supportedParams);\n      url.hash = '';\n      redirectUri = url.toString();\n    }\n    if (parsed?.oauthParams) {\n      if (this.flow === 'standard' || this.flow === 'hybrid') {\n        if ((parsed.oauthParams.code || parsed.oauthParams.error) && parsed.oauthParams.state) {\n          parsed.oauthParams.redirectUri = redirectUri;\n          return parsed.oauthParams;\n        }\n      } else if (this.flow === 'implicit') {\n        if ((parsed.oauthParams.access_token || parsed.oauthParams.error) && parsed.oauthParams.state) {\n          parsed.oauthParams.redirectUri = redirectUri;\n          return parsed.oauthParams;\n        }\n      }\n    }\n  }\n\n  /**\n   * @typedef {Object} ParsedCallbackParams\n   * @property {string} paramsString\n   * @property {Record<string, string | undefined>} oauthParams\n   */\n\n  /**\n   * @param {string} paramsString\n   * @param {string[]} supportedParams\n   * @returns {ParsedCallbackParams}\n   */\n  #parseCallbackParams(paramsString, supportedParams) {\n    const params = new URLSearchParams(paramsString);\n    /** @type {Record<string, string>} */\n    const oauthParams = {};\n    for (const [key, value] of Array.from(params.entries())) {\n      if (supportedParams.includes(key)) {\n        oauthParams[key] = value;\n        params.delete(key);\n      }\n    }\n    return {\n      paramsString: params.toString(),\n      oauthParams\n    };\n  }\n  async #processCallback(oauth) {\n    const {\n      code,\n      error,\n      prompt\n    } = oauth;\n    let timeLocal = new Date().getTime();\n\n    /**\n     * @param {string} accessToken\n     * @param {string=} refreshToken\n     * @param {string=} idToken\n     */\n    const authSuccess = (accessToken, refreshToken, idToken) => {\n      timeLocal = (timeLocal + new Date().getTime()) / 2;\n      this.#setToken(accessToken, refreshToken, idToken, timeLocal);\n      if (this.#useNonce && this.idTokenParsed && this.idTokenParsed.nonce !== oauth.storedNonce) {\n        this.#logInfo('[KEYCLOAK] Invalid nonce, clearing token');\n        this.clearToken();\n        throw new Error('Invalid nonce.');\n      }\n    };\n    if (oauth.kc_action_status) {\n      this.onActionUpdate && this.onActionUpdate(oauth.kc_action_status, oauth.kc_action);\n    }\n    if (error) {\n      if (prompt !== 'none') {\n        if (oauth.error_description && oauth.error_description === 'authentication_expired') {\n          await this.login(oauth.loginOptions);\n        } else {\n          const errorData = {\n            error,\n            error_description: oauth.error_description\n          };\n          this.onAuthError?.(errorData);\n          throw errorData;\n        }\n      }\n      return;\n    } else if (this.flow !== 'standard' && (oauth.access_token || oauth.id_token)) {\n      authSuccess(oauth.access_token, undefined, oauth.id_token);\n      this.onAuthSuccess?.();\n    }\n    if (this.flow !== 'implicit' && code) {\n      try {\n        const response = await fetchAccessToken(this.endpoints.token(), code, /** @type {string} */this.clientId, oauth.redirectUri, oauth.pkceCodeVerifier);\n        authSuccess(response.access_token, response.refresh_token, response.id_token);\n        if (this.flow === 'standard') {\n          this.onAuthSuccess?.();\n        }\n        this.#scheduleCheckIframe();\n      } catch (error) {\n        this.onAuthError?.();\n        throw error;\n      }\n    }\n  }\n  async #scheduleCheckIframe() {\n    if (this.#loginIframe.enable && this.token) {\n      await waitForTimeout(this.#loginIframe.interval * 1000);\n      const unchanged = await this.#checkLoginIframe();\n      if (unchanged) {\n        await this.#scheduleCheckIframe();\n      }\n    }\n  }\n\n  /**\n   * @param {KeycloakLoginOptions} [options]\n   * @returns {Promise<void>}\n   */\n  login(options) {\n    return this.#adapter.login(options);\n  }\n\n  /**\n   * @param {KeycloakLoginOptions} [options]\n   * @returns {Promise<string>}\n   */\n  async createLoginUrl(options) {\n    const state = createUUID();\n    const nonce = createUUID();\n    const redirectUri = this.#adapter.redirectUri(options);\n    /** @type {CallbackState} */\n    const callbackState = {\n      state,\n      nonce,\n      redirectUri,\n      loginOptions: options\n    };\n    if (options?.prompt) {\n      callbackState.prompt = options.prompt;\n    }\n    const url = options?.action === 'register' ? this.endpoints.register() : this.endpoints.authorize();\n    let scope = options?.scope || this.scope;\n    const scopeValues = scope ? scope.split(' ') : [];\n\n    // Ensure the 'openid' scope is always included.\n    if (!scopeValues.includes('openid')) {\n      scopeValues.unshift('openid');\n    }\n    scope = scopeValues.join(' ');\n    const params = new URLSearchParams([['client_id', (/** @type {string} */this.clientId)],\n    // The endpoint URI MUST NOT include a fragment component.\n    // https://datatracker.ietf.org/doc/html/rfc6749#section-3.1.2\n    ['redirect_uri', stripHash(redirectUri)], ['state', state], ['response_mode', this.responseMode], ['response_type', this.responseType], ['scope', scope]]);\n    if (this.#useNonce) {\n      params.append('nonce', nonce);\n    }\n    if (options?.prompt) {\n      params.append('prompt', options.prompt);\n    }\n    if (typeof options?.maxAge === 'number') {\n      params.append('max_age', options.maxAge.toString());\n    }\n    if (options?.loginHint) {\n      params.append('login_hint', options.loginHint);\n    }\n    if (options?.idpHint) {\n      params.append('kc_idp_hint', options.idpHint);\n    }\n    if (options?.action && options.action !== 'register') {\n      params.append('kc_action', options.action);\n    }\n    if (options?.locale) {\n      params.append('ui_locales', options.locale);\n    }\n    if (options?.acr) {\n      params.append('claims', buildClaimsParameter(options.acr));\n    }\n    if (options?.acrValues) {\n      params.append('acr_values', options.acrValues);\n    }\n    if (this.pkceMethod) {\n      try {\n        const codeVerifier = generateCodeVerifier(96);\n        const pkceChallenge = await generatePkceChallenge(this.pkceMethod, codeVerifier);\n        callbackState.pkceCodeVerifier = codeVerifier;\n        params.append('code_challenge', pkceChallenge);\n        params.append('code_challenge_method', this.pkceMethod);\n      } catch (error) {\n        throw new Error('Failed to generate PKCE challenge.', {\n          cause: error\n        });\n      }\n    }\n    this.#callbackStorage.add(callbackState);\n    return `${url}?${params.toString()}`;\n  }\n\n  /**\n   * @param {KeycloakLogoutOptions} [options]\n   * @returns {Promise<void>}\n   */\n  logout(options) {\n    return this.#adapter.logout(options);\n  }\n\n  /**\n   * @param {KeycloakLogoutOptions} [options]\n   * @returns {string}\n   */\n  createLogoutUrl(options) {\n    const logoutMethod = options?.logoutMethod ?? this.logoutMethod;\n    const url = this.endpoints.logout();\n    if (logoutMethod === 'POST') {\n      return url;\n    }\n    const params = new URLSearchParams([['client_id', (/** @type {string} */this.clientId)], ['post_logout_redirect_uri', this.#adapter.redirectUri(options)]]);\n    if (this.idToken) {\n      params.append('id_token_hint', this.idToken);\n    }\n    return `${url}?${params.toString()}`;\n  }\n\n  /**\n   * @param {KeycloakRegisterOptions} [options]\n   * @returns {Promise<void>}\n   */\n  register(options) {\n    return this.#adapter.register(options);\n  }\n\n  /**\n   * @param {KeycloakRegisterOptions} [options]\n   * @returns {Promise<string>}\n   */\n  createRegisterUrl(options) {\n    return this.createLoginUrl({\n      ...options,\n      action: 'register'\n    });\n  }\n\n  /**\n   * @param {KeycloakAccountOptions} [options]\n   * @returns {string}\n   */\n  createAccountUrl(options) {\n    const url = this.#getRealmUrl();\n    if (!url) {\n      throw new Error('Unable to create account URL, make sure the adapter is not configured using a generic OIDC provider.');\n    }\n    const params = new URLSearchParams([['referrer', (/** @type {string} */this.clientId)], ['referrer_uri', this.#adapter.redirectUri(options)]]);\n    return `${url}/account?${params.toString()}`;\n  }\n\n  /**\n   * @returns {Promise<void>}\n   */\n  accountManagement() {\n    return this.#adapter.accountManagement();\n  }\n\n  /**\n   * @param {string} role\n   * @returns {boolean}\n   */\n  hasRealmRole(role) {\n    const access = this.realmAccess;\n    return !!access && access.roles.indexOf(role) >= 0;\n  }\n\n  /**\n   * @param {string} role\n   * @param {string} [resource]\n   * @returns {boolean}\n   */\n  hasResourceRole(role, resource) {\n    if (!this.resourceAccess) {\n      return false;\n    }\n    const access = this.resourceAccess[resource || (/** @type {string} */this.clientId)];\n    return !!access && access.roles.indexOf(role) >= 0;\n  }\n\n  /**\n   * @returns {Promise<KeycloakProfile>}\n   */\n  async loadUserProfile() {\n    const realmUrl = this.#getRealmUrl();\n    if (!realmUrl) {\n      throw new Error('Unable to load user profile, make sure the adapter is not configured using a generic OIDC provider.');\n    }\n    const url = `${realmUrl}/account`;\n    /** @type {KeycloakProfile} */\n    const profile = await fetchJSON(url, {\n      headers: [buildAuthorizationHeader(this.token)]\n    });\n    return this.profile = profile;\n  }\n\n  /**\n   * @returns {Promise<{}>}\n   */\n  async loadUserInfo() {\n    const url = this.endpoints.userinfo();\n    /** @type {{}} */\n    const userInfo = await fetchJSON(url, {\n      headers: [buildAuthorizationHeader(this.token)]\n    });\n    return this.userInfo = userInfo;\n  }\n\n  /**\n   * @param {number} [minValidity]\n   * @returns {boolean}\n   */\n  isTokenExpired(minValidity) {\n    if (!this.tokenParsed || !this.refreshToken && this.flow !== 'implicit') {\n      throw new Error('Not authenticated');\n    }\n    if (this.timeSkew == null) {\n      this.#logInfo('[KEYCLOAK] Unable to determine if token is expired as timeskew is not set');\n      return true;\n    }\n    if (typeof this.tokenParsed.exp !== 'number') {\n      return false;\n    }\n    let expiresIn = this.tokenParsed.exp - Math.ceil(new Date().getTime() / 1000) + this.timeSkew;\n    if (minValidity) {\n      if (isNaN(minValidity)) {\n        throw new Error('Invalid minValidity');\n      }\n      expiresIn -= minValidity;\n    }\n    return expiresIn < 0;\n  }\n\n  /**\n   * @param {number} minValidity\n   * @returns {Promise<boolean>}\n   */\n  async updateToken(minValidity) {\n    if (!this.refreshToken) {\n      throw new Error('Unable to update token, no refresh token available.');\n    }\n    minValidity = minValidity || 5;\n    if (this.#loginIframe.enable) {\n      await this.#checkLoginIframe();\n    }\n    let refreshToken = false;\n    if (minValidity === -1) {\n      refreshToken = true;\n      this.#logInfo('[KEYCLOAK] Refreshing token: forced refresh');\n    } else if (!this.tokenParsed || this.isTokenExpired(minValidity)) {\n      refreshToken = true;\n      this.#logInfo('[KEYCLOAK] Refreshing token: token expired');\n    }\n    if (!refreshToken) {\n      return false;\n    }\n\n    /** @type {PromiseWithResolvers<boolean>} */\n    const {\n      promise,\n      resolve,\n      reject\n    } = Promise.withResolvers();\n    this.#refreshQueue.push({\n      resolve,\n      reject\n    });\n    if (this.#refreshQueue.length === 1) {\n      const url = this.endpoints.token();\n      let timeLocal = new Date().getTime();\n      try {\n        const response = await fetchRefreshToken(url, this.refreshToken, /** @type {string} */this.clientId);\n        this.#logInfo('[KEYCLOAK] Token refreshed');\n        timeLocal = (timeLocal + new Date().getTime()) / 2;\n        this.#setToken(response.access_token, response.refresh_token, response.id_token, timeLocal);\n        this.onAuthRefreshSuccess?.();\n        for (let p = this.#refreshQueue.pop(); p != null; p = this.#refreshQueue.pop()) {\n          p.resolve(true);\n        }\n      } catch (error) {\n        this.#logWarn('[KEYCLOAK] Failed to refresh token');\n        if (error instanceof NetworkError && error.response.status === 400) {\n          this.clearToken();\n        }\n        this.onAuthRefreshError?.();\n        for (let p = this.#refreshQueue.pop(); p != null; p = this.#refreshQueue.pop()) {\n          p.reject(error);\n        }\n      }\n    }\n    return await promise;\n  }\n  clearToken() {\n    if (this.token) {\n      this.#setToken();\n      this.onAuthLogout?.();\n      if (this.loginRequired) {\n        this.login();\n      }\n    }\n  }\n\n  /**\n   * @param {string} [token]\n   * @param {string} [refreshToken]\n   * @param {string} [idToken]\n   * @param {number} [timeLocal]\n   */\n  #setToken(token, refreshToken, idToken, timeLocal) {\n    if (this.tokenTimeoutHandle) {\n      clearTimeout(this.tokenTimeoutHandle);\n      this.tokenTimeoutHandle = undefined;\n    }\n    if (refreshToken) {\n      this.refreshToken = refreshToken;\n      this.refreshTokenParsed = decodeToken(refreshToken);\n    } else {\n      delete this.refreshToken;\n      delete this.refreshTokenParsed;\n    }\n    if (idToken) {\n      this.idToken = idToken;\n      this.idTokenParsed = decodeToken(idToken);\n    } else {\n      delete this.idToken;\n      delete this.idTokenParsed;\n    }\n    if (token) {\n      this.token = token;\n      this.tokenParsed = decodeToken(token);\n      this.sessionId = this.tokenParsed.sid;\n      this.authenticated = true;\n      this.subject = this.tokenParsed.sub;\n      this.realmAccess = this.tokenParsed.realm_access;\n      this.resourceAccess = this.tokenParsed.resource_access;\n      if (timeLocal) {\n        this.timeSkew = Math.floor(timeLocal / 1000) - this.tokenParsed.iat;\n      }\n      if (this.timeSkew !== null) {\n        this.#logInfo('[KEYCLOAK] Estimated time difference between browser and server is ' + this.timeSkew + ' seconds');\n        if (this.onTokenExpired) {\n          const expiresIn = (this.tokenParsed.exp - new Date().getTime() / 1000 + this.timeSkew) * 1000;\n          this.#logInfo('[KEYCLOAK] Token expires in ' + Math.round(expiresIn / 1000) + ' s');\n          if (expiresIn <= 0) {\n            this.onTokenExpired();\n          } else {\n            this.tokenTimeoutHandle = window.setTimeout(this.onTokenExpired, expiresIn);\n          }\n        }\n      }\n    } else {\n      delete this.token;\n      delete this.tokenParsed;\n      delete this.subject;\n      delete this.realmAccess;\n      delete this.resourceAccess;\n      this.authenticated = false;\n    }\n  }\n\n  /**\n   * @returns {string=}\n   */\n  #getRealmUrl() {\n    if (typeof this.authServerUrl === 'undefined') {\n      return;\n    }\n    return `${stripTrailingSlash(this.authServerUrl)}/realms/${encodeURIComponent(/** @type {string} */this.realm)}`;\n  }\n\n  /**\n   * @param {Function} fn\n   * @returns {(message: string) => void}\n   */\n  #createLogger(fn) {\n    return message => {\n      if (this.enableLogging) {\n        fn.call(console, message);\n      }\n    };\n  }\n}\n\n/**\n * @returns {string}\n */\nfunction createUUID() {\n  if (typeof crypto === 'undefined' || typeof crypto.randomUUID === 'undefined') {\n    throw new Error('Web Crypto API is not available.');\n  }\n  return crypto.randomUUID();\n}\n\n/**\n * @param {Acr} requestedAcr\n * @returns {string}\n */\nfunction buildClaimsParameter(requestedAcr) {\n  return JSON.stringify({\n    id_token: {\n      acr: requestedAcr\n    }\n  });\n}\n\n/**\n * @param {number} len\n * @returns {string}\n */\nfunction generateCodeVerifier(len) {\n  return generateRandomString(len, 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789');\n}\n\n/**\n * @param {string} pkceMethod\n * @param {string} codeVerifier\n * @returns {Promise<string>}\n */\nasync function generatePkceChallenge(pkceMethod, codeVerifier) {\n  if (pkceMethod !== 'S256') {\n    throw new TypeError(`Invalid value for 'pkceMethod', expected 'S256' but got '${pkceMethod}'.`);\n  }\n\n  // hash codeVerifier, then encode as url-safe base64 without padding\n  const hashBytes = new Uint8Array(await sha256Digest(codeVerifier));\n  const encodedHash = bytesToBase64(hashBytes).replace(/\\+/g, '-').replace(/\\//g, '_').replace(/=/g, '');\n  return encodedHash;\n}\n\n/**\n * @param {number} len\n * @param {string} alphabet\n * @returns {string}\n */\nfunction generateRandomString(len, alphabet) {\n  const randomData = generateRandomData(len);\n  const chars = new Array(len);\n  for (let i = 0; i < len; i++) {\n    chars[i] = alphabet.charCodeAt(randomData[i] % alphabet.length);\n  }\n  return String.fromCharCode.apply(null, chars);\n}\n\n/**\n * @param {number} len\n * @returns {Uint8Array<ArrayBuffer>}\n */\nfunction generateRandomData(len) {\n  if (typeof crypto === 'undefined' || typeof crypto.getRandomValues === 'undefined') {\n    throw new Error('Web Crypto API is not available.');\n  }\n  return crypto.getRandomValues(new Uint8Array(len));\n}\n\n/**\n * Function to extend existing native Promise with timeout\n *\n * @template T\n * @param {Promise<T>} promise\n * @param {number} timeout\n * @param {string} errorMessage\n * @returns {Promise<T>}\n */\nfunction applyTimeoutToPromise(promise, timeout, errorMessage) {\n  /** @type {number} */\n  let timeoutHandle;\n  const timeoutPromise = new Promise(function (resolve, reject) {\n    timeoutHandle = window.setTimeout(function () {\n      reject(new Error(errorMessage || 'Promise is not settled within timeout of ' + timeout + 'ms'));\n    }, timeout);\n  });\n  return Promise.race([promise, timeoutPromise]).finally(function () {\n    clearTimeout(timeoutHandle);\n  });\n}\n\n/**\n * @returns {CallbackStorage}\n */\nfunction createCallbackStorage() {\n  try {\n    return new LocalStorage();\n  } catch (err) {\n    return new CookieStorage();\n  }\n}\nconst STORAGE_KEY_PREFIX = 'kc-callback-';\n\n/**\n * @typedef {Object} CallbackState\n * @property {string} state\n * @property {string} nonce\n * @property {string} redirectUri\n * @property {KeycloakLoginOptions} [loginOptions]\n * @property {KeycloakLoginOptions['prompt']} [prompt]\n * @property {string} [pkceCodeVerifier]\n */\n\n/**\n * @typedef {Object} CallbackStorage\n * @property {(state?: string) => CallbackState | null} get\n * @property {(state: CallbackState) => void} add\n */\n\n/**\n * @implements {CallbackStorage}\n */\nclass LocalStorage {\n  constructor() {\n    globalThis.localStorage.setItem('kc-test', 'test');\n    globalThis.localStorage.removeItem('kc-test');\n  }\n\n  /**\n   * @param {string} [state]\n   * @returns {CallbackState | null}\n   */\n  get(state) {\n    if (!state) {\n      return null;\n    }\n    this.#clearInvalidValues();\n    const key = STORAGE_KEY_PREFIX + state;\n    const value = globalThis.localStorage.getItem(key);\n    if (value) {\n      globalThis.localStorage.removeItem(key);\n      return JSON.parse(value);\n    }\n    return null;\n  }\n  /**\n   * @param {CallbackState} state\n   */\n  add(state) {\n    this.#clearInvalidValues();\n    const key = STORAGE_KEY_PREFIX + state.state;\n    const value = JSON.stringify({\n      ...state,\n      // Set the expiry time to 1 hour from now.\n      expires: Date.now() + 60 * 60 * 1000\n    });\n    try {\n      globalThis.localStorage.setItem(key, value);\n    } catch (error) {\n      // If the storage is full, clear all known values and try again.\n      this.#clearAllValues();\n      globalThis.localStorage.setItem(key, value);\n    }\n  }\n  /**\n   * Clears all values from local storage that are no longer valid.\n   */\n  #clearInvalidValues() {\n    const currentTime = Date.now();\n    for (const [key, value] of this.#getStoredEntries()) {\n      // Attempt to parse the expiry time from the value.\n      const expiry = this.#parseExpiry(value);\n\n      // Discard the value if it is malformed or expired.\n      if (expiry === null || expiry < currentTime) {\n        globalThis.localStorage.removeItem(key);\n      }\n    }\n  }\n\n  /**\n   * Clears all known values from local storage.\n   */\n  #clearAllValues() {\n    for (const [key] of this.#getStoredEntries()) {\n      globalThis.localStorage.removeItem(key);\n    }\n  }\n\n  /**\n   * Gets all entries stored in local storage that are known to be managed by this class.\n   * @returns {[string, string][]} An array of key-value pairs.\n   */\n  #getStoredEntries() {\n    return Object.entries(globalThis.localStorage).filter(([key]) => key.startsWith(STORAGE_KEY_PREFIX));\n  }\n\n  /**\n   * Parses the expiry time from a value stored in local storage.\n   * @param {string} value\n   * @returns {number | null} The expiry time in milliseconds, or `null` if the value is malformed.\n   */\n  #parseExpiry(value) {\n    let parsedValue;\n\n    // Attempt to parse the value as JSON.\n    try {\n      parsedValue = JSON.parse(value);\n    } catch (error) {\n      return null;\n    }\n\n    // Attempt to extract the 'expires' property.\n    if (isObject(parsedValue) && 'expires' in parsedValue && typeof parsedValue.expires === 'number') {\n      return parsedValue.expires;\n    }\n    return null;\n  }\n}\n\n/**\n * @implements {CallbackStorage}\n */\nclass CookieStorage {\n  /**\n   * @param {string} [state]\n   * @returns {CallbackState | null}\n   */\n  get(state) {\n    if (!state) {\n      return null;\n    }\n    const value = this.#getCookie(STORAGE_KEY_PREFIX + state);\n    this.#setCookie(STORAGE_KEY_PREFIX + state, '', this.#cookieExpiration(-100));\n    if (value) {\n      return JSON.parse(value);\n    }\n    return null;\n  }\n\n  /**\n   * @param {CallbackState} state\n   */\n  add(state) {\n    this.#setCookie(STORAGE_KEY_PREFIX + state.state, JSON.stringify(state), this.#cookieExpiration(60));\n  }\n\n  /**\n   * @param {string} key\n   * @returns\n   */\n  #getCookie(key) {\n    const name = key + '=';\n    const ca = document.cookie.split(';');\n    for (let i = 0; i < ca.length; i++) {\n      let c = ca[i];\n      while (c.charAt(0) === ' ') {\n        c = c.substring(1);\n      }\n      if (c.indexOf(name) === 0) {\n        return c.substring(name.length, c.length);\n      }\n    }\n    return '';\n  }\n\n  /**\n   * @param {string} key\n   * @param {string} value\n   * @param {Date} expirationDate\n   */\n  #setCookie(key, value, expirationDate) {\n    const cookie = key + '=' + value + '; ' + 'expires=' + expirationDate.toUTCString() + '; ';\n    document.cookie = cookie;\n  }\n\n  /**\n   * @param {number} minutes\n   * @returns {Date}\n   */\n  #cookieExpiration(minutes) {\n    const exp = new Date();\n    exp.setTime(exp.getTime() + minutes * 60 * 1000);\n    return exp;\n  }\n}\n\n/**\n * @param {Uint8Array<ArrayBuffer>} bytes\n * @see https://developer.mozilla.org/en-US/docs/Glossary/Base64#the_unicode_problem\n */\nfunction bytesToBase64(bytes) {\n  const binString = String.fromCodePoint(...bytes);\n  return btoa(binString);\n}\n\n/**\n * @param {string} message\n * @see https://developer.mozilla.org/en-US/docs/Web/API/SubtleCrypto/digest#basic_example\n */\nasync function sha256Digest(message) {\n  const encoder = new TextEncoder();\n  const data = encoder.encode(message);\n  if (typeof crypto === 'undefined' || typeof crypto.subtle === 'undefined') {\n    throw new Error('Web Crypto API is not available.');\n  }\n  return await crypto.subtle.digest('SHA-256', data);\n}\n\n/**\n * @param {string} token\n * @returns {KeycloakTokenParsed}\n */\nfunction decodeToken(token) {\n  const [, payload] = token.split('.');\n  if (typeof payload !== 'string') {\n    throw new Error('Unable to decode token, payload not found.');\n  }\n  let decoded;\n  try {\n    decoded = base64UrlDecode(payload);\n  } catch (error) {\n    throw new Error('Unable to decode token, payload is not a valid Base64URL value.', {\n      cause: error\n    });\n  }\n  try {\n    return JSON.parse(decoded);\n  } catch (error) {\n    throw new Error('Unable to decode token, payload is not a valid JSON value.', {\n      cause: error\n    });\n  }\n}\n\n/**\n * @param {string} input\n */\nfunction base64UrlDecode(input) {\n  let output = input.replaceAll('-', '+').replaceAll('_', '/');\n  switch (output.length % 4) {\n    case 0:\n      break;\n    case 2:\n      output += '==';\n      break;\n    case 3:\n      output += '=';\n      break;\n    default:\n      throw new Error('Input is not of the correct length.');\n  }\n  try {\n    return b64DecodeUnicode(output);\n  } catch (error) {\n    return atob(output);\n  }\n}\n\n/**\n * @param {string} input\n */\nfunction b64DecodeUnicode(input) {\n  return decodeURIComponent(atob(input).replace(/(.)/g, (m, p) => {\n    let code = p.charCodeAt(0).toString(16).toUpperCase();\n    if (code.length < 2) {\n      code = '0' + code;\n    }\n    return '%' + code;\n  }));\n}\n\n/**\n * Check if the input is an object that can be operated on.\n * @param {unknown} input\n */\nfunction isObject(input) {\n  return typeof input === 'object' && input !== null;\n}\n\n/**\n * @typedef {Object} JsonConfig The JSON version of the adapter configuration.\n * @property {string} auth-server-url The URL of the authentication server.\n * @property {string} realm The name of the realm.\n * @property {string} resource The name of the resource, usually the client ID.\n */\n\n/**\n * Fetch the adapter configuration from the given URL.\n * @param {string} url\n * @returns {Promise<JsonConfig>}\n */\nasync function fetchJsonConfig(url) {\n  return await fetchJSON(url);\n}\n\n/**\n * Fetch the OpenID configuration from the given URL.\n * @param {string} url\n * @returns {Promise<OpenIdProviderMetadata>}\n */\nasync function fetchOpenIdConfig(url) {\n  return await fetchJSON(url);\n}\n\n/**\n * @typedef {Object} AccessTokenResponse The successful token response from the authorization server, based on the {@link https://datatracker.ietf.org/doc/html/rfc6749#section-5.1 OAuth 2.0 Authorization Framework specification}.\n * @property {string} access_token The access token issued by the authorization server.\n * @property {string} token_type The type of the token issued by the authorization server.\n * @property {number} [expires_in] The lifetime in seconds of the access token.\n * @property {string} [refresh_token] The refresh token issued by the authorization server.\n * @property {string} [id_token] The ID token issued by the authorization server, if requested.\n * @property {string} [scope] The scope of the access token.\n */\n\n/**\n * Fetch the access token from the given URL.\n * @param {string} url\n * @param {string} code\n * @param {string} clientId\n * @param {string} redirectUri\n * @param {string} [pkceCodeVerifier]\n * @returns {Promise<AccessTokenResponse>}\n */\nasync function fetchAccessToken(url, code, clientId, redirectUri, pkceCodeVerifier) {\n  const body = new URLSearchParams([['code', code], ['grant_type', 'authorization_code'], ['client_id', clientId], ['redirect_uri', stripHash(redirectUri)]]);\n  if (pkceCodeVerifier) {\n    body.append('code_verifier', pkceCodeVerifier);\n  }\n  return await fetchJSON(url, {\n    method: 'POST',\n    credentials: 'include',\n    body\n  });\n}\n\n/**\n * Fetch the refresh token from the given URL.\n * @param {string} url\n * @param {string} refreshToken\n * @param {string} clientId\n * @returns {Promise<AccessTokenResponse>}\n */\nasync function fetchRefreshToken(url, refreshToken, clientId) {\n  const body = new URLSearchParams([['grant_type', 'refresh_token'], ['refresh_token', refreshToken], ['client_id', clientId]]);\n  return await fetchJSON(url, {\n    method: 'POST',\n    credentials: 'include',\n    body\n  });\n}\n\n/**\n * @template [T=unknown]\n * @param {string} url\n * @param {RequestInit} init\n * @returns {Promise<T>}\n */\nasync function fetchJSON(url, init = {}) {\n  const headers = new Headers(init.headers);\n  headers.set('Accept', CONTENT_TYPE_JSON);\n  const response = await fetchWithErrorHandling(url, {\n    ...init,\n    headers\n  });\n  return await response.json();\n}\n\n/**\n * @param {string} url\n * @param {RequestInit} [init]\n * @returns {Promise<Response>}\n */\nasync function fetchWithErrorHandling(url, init) {\n  const response = await fetch(url, init);\n  if (!response.ok) {\n    throw new NetworkError('Server responded with an invalid status.', {\n      response\n    });\n  }\n  return response;\n}\n\n/**\n * @param {string} [token]\n * @returns {[string, string]}\n */\nfunction buildAuthorizationHeader(token) {\n  if (!token) {\n    throw new Error('Unable to build authorization header, token is not set, make sure the user is authenticated.');\n  }\n  return ['Authorization', `bearer ${token}`];\n}\n\n/**\n * @param {string} url\n * @returns {string}\n */\nfunction stripTrailingSlash(url) {\n  return url.endsWith('/') ? url.slice(0, -1) : url;\n}\n\n/**\n * @param {string} url\n * @returns {string}\n */\nfunction stripHash(url) {\n  const parsedUrl = new URL(url);\n  parsedUrl.hash = '';\n  return parsedUrl.toString();\n}\n\n/**\n * @typedef {Object} NetworkErrorOptionsProperties\n * @property {Response} response\n * @typedef {ErrorOptions & NetworkErrorOptionsProperties} NetworkErrorOptions\n */\n\nexport class NetworkError extends Error {\n  /** @type {Response} */\n  response;\n\n  /**\n   * @param {string} message\n   * @param {NetworkErrorOptions} options\n   */\n  constructor(message, options) {\n    super(message, options);\n    this.response = options.response;\n  }\n}\n\n/**\n * @param {number} delay\n * @returns {Promise<void>}\n */\nconst waitForTimeout = delay => new Promise(resolve => setTimeout(resolve, delay));", "import * as i0 from '@angular/core';\nimport { Injectable, NgModule, signal, InjectionToken, inject, effect, Directive, Input, computed, PLATFORM_ID, provideAppInitializer, EnvironmentInjector, runInInjectionContext, makeEnvironmentProviders } from '@angular/core';\nimport { HttpHeaders, HTTP_INTERCEPTORS } from '@angular/common/http';\nimport { Subject, from, combineLatest, of, fromEvent, mergeMap as mergeMap$1 } from 'rxjs';\nimport { map, mergeMap, debounceTime, takeUntil } from 'rxjs/operators';\nimport Keycloak from 'keycloak-js';\nimport { CommonModule, isPlatformBrowser } from '@angular/common';\n\n/**\n * @license\n * Copyright Mauricio Gemelli Vigolo and contributors.\n *\n * Use of this source code is governed by a MIT-style license that can be\n * found in the LICENSE file at https://github.com/mauriciovigolo/keycloak-angular/blob/main/LICENSE.md\n */\n/**\n * Keycloak event types, as described at the keycloak-js documentation:\n * https://www.keycloak.org/docs/latest/securing_apps/index.html#callback-events\n *\n * @deprecated Keycloak Event based on the KeycloakService is deprecated and\n * will be removed in future versions.\n * Use the new `KEYCLOAK_EVENT_SIGNAL` injection token to listen for the keycloak\n * events.\n * More info: https://github.com/mauriciovigolo/keycloak-angular/docs/migration-guides/v19.md\n */\nvar KeycloakEventTypeLegacy;\n(function (KeycloakEventTypeLegacy) {\n  /**\n   * Called if there was an error during authentication.\n   */\n  KeycloakEventTypeLegacy[KeycloakEventTypeLegacy[\"OnAuthError\"] = 0] = \"OnAuthError\";\n  /**\n   * Called if the user is logged out\n   * (will only be called if the session status iframe is enabled, or in Cordova mode).\n   */\n  KeycloakEventTypeLegacy[KeycloakEventTypeLegacy[\"OnAuthLogout\"] = 1] = \"OnAuthLogout\";\n  /**\n   * Called if there was an error while trying to refresh the token.\n   */\n  KeycloakEventTypeLegacy[KeycloakEventTypeLegacy[\"OnAuthRefreshError\"] = 2] = \"OnAuthRefreshError\";\n  /**\n   * Called when the token is refreshed.\n   */\n  KeycloakEventTypeLegacy[KeycloakEventTypeLegacy[\"OnAuthRefreshSuccess\"] = 3] = \"OnAuthRefreshSuccess\";\n  /**\n   * Called when a user is successfully authenticated.\n   */\n  KeycloakEventTypeLegacy[KeycloakEventTypeLegacy[\"OnAuthSuccess\"] = 4] = \"OnAuthSuccess\";\n  /**\n   * Called when the adapter is initialized.\n   */\n  KeycloakEventTypeLegacy[KeycloakEventTypeLegacy[\"OnReady\"] = 5] = \"OnReady\";\n  /**\n   * Called when the access token is expired. If a refresh token is available the token\n   * can be refreshed with updateToken, or in cases where it is not (that is, with implicit flow)\n   * you can redirect to login screen to obtain a new access token.\n   */\n  KeycloakEventTypeLegacy[KeycloakEventTypeLegacy[\"OnTokenExpired\"] = 6] = \"OnTokenExpired\";\n  /**\n   * Called when a AIA has been requested by the application.\n   */\n  KeycloakEventTypeLegacy[KeycloakEventTypeLegacy[\"OnActionUpdate\"] = 7] = \"OnActionUpdate\";\n})(KeycloakEventTypeLegacy || (KeycloakEventTypeLegacy = {}));\n\n/**\n * @license\n * Copyright Mauricio Gemelli Vigolo and contributors.\n *\n * Use of this source code is governed by a MIT-style license that can be\n * found in the LICENSE file at https://github.com/mauriciovigolo/keycloak-angular/blob/main/LICENSE.md\n */\n/**\n * A simple guard implementation out of the box. This class should be inherited and\n * implemented by the application. The only method that should be implemented is #isAccessAllowed.\n * The reason for this is that the authorization flow is usually not unique, so in this way you will\n * have more freedom to customize your authorization flow.\n *\n * @deprecated Class based guards are deprecated in Keycloak Angular and will be removed in future versions.\n * Use the new `createAuthGuard` function to create a Guard for your application.\n * More info: https://github.com/mauriciovigolo/keycloak-angular/docs/migration-guides/v19.md\n */\nclass KeycloakAuthGuard {\n  constructor(router, keycloakAngular) {\n    this.router = router;\n    this.keycloakAngular = keycloakAngular;\n  }\n  /**\n   * CanActivate checks if the user is logged in and get the full list of roles (REALM + CLIENT)\n   * of the logged user. This values are set to authenticated and roles params.\n   *\n   * @param route\n   * @param state\n   */\n  async canActivate(route, state) {\n    try {\n      this.authenticated = await this.keycloakAngular.isLoggedIn();\n      this.roles = await this.keycloakAngular.getUserRoles(true);\n      return await this.isAccessAllowed(route, state);\n    } catch (error) {\n      throw new Error('An error happened during access validation. Details:' + error);\n    }\n  }\n}\n\n/**\n * @license\n * Copyright Mauricio Gemelli Vigolo and contributors.\n *\n * Use of this source code is governed by a MIT-style license that can be\n * found in the LICENSE file at https://github.com/mauriciovigolo/keycloak-angular/blob/main/LICENSE.md\n */\n/**\n * Service to expose existent methods from the Keycloak JS adapter, adding new\n * functionalities to improve the use of keycloak in Angular v > 4.3 applications.\n *\n * This class should be injected in the application bootstrap, so the same instance will be used\n * along the web application.\n *\n * @deprecated This service is deprecated and will be removed in future versions.\n * Use the new `provideKeycloak` function to load Keycloak in an Angular application.\n * More info: https://github.com/mauriciovigolo/keycloak-angular/docs/migration-guides/v19.md\n */\nclass KeycloakService {\n  constructor() {\n    /**\n     * Observer for the keycloak events\n     */\n    this._keycloakEvents$ = new Subject();\n  }\n  /**\n   * Binds the keycloak-js events to the keycloakEvents Subject\n   * which is a good way to monitor for changes, if needed.\n   *\n   * The keycloakEvents returns the keycloak-js event type and any\n   * argument if the source function provides any.\n   */\n  bindsKeycloakEvents() {\n    this._instance.onAuthError = errorData => {\n      this._keycloakEvents$.next({\n        args: errorData,\n        type: KeycloakEventTypeLegacy.OnAuthError\n      });\n    };\n    this._instance.onAuthLogout = () => {\n      this._keycloakEvents$.next({\n        type: KeycloakEventTypeLegacy.OnAuthLogout\n      });\n    };\n    this._instance.onAuthRefreshSuccess = () => {\n      this._keycloakEvents$.next({\n        type: KeycloakEventTypeLegacy.OnAuthRefreshSuccess\n      });\n    };\n    this._instance.onAuthRefreshError = () => {\n      this._keycloakEvents$.next({\n        type: KeycloakEventTypeLegacy.OnAuthRefreshError\n      });\n    };\n    this._instance.onAuthSuccess = () => {\n      this._keycloakEvents$.next({\n        type: KeycloakEventTypeLegacy.OnAuthSuccess\n      });\n    };\n    this._instance.onTokenExpired = () => {\n      this._keycloakEvents$.next({\n        type: KeycloakEventTypeLegacy.OnTokenExpired\n      });\n    };\n    this._instance.onActionUpdate = state => {\n      this._keycloakEvents$.next({\n        args: state,\n        type: KeycloakEventTypeLegacy.OnActionUpdate\n      });\n    };\n    this._instance.onReady = authenticated => {\n      this._keycloakEvents$.next({\n        args: authenticated,\n        type: KeycloakEventTypeLegacy.OnReady\n      });\n    };\n  }\n  /**\n   * Loads all bearerExcludedUrl content in a uniform type: ExcludedUrl,\n   * so it becomes easier to handle.\n   *\n   * @param bearerExcludedUrls array of strings or ExcludedUrl that includes\n   * the url and HttpMethod.\n   */\n  loadExcludedUrls(bearerExcludedUrls) {\n    const excludedUrls = [];\n    for (const item of bearerExcludedUrls) {\n      let excludedUrl;\n      if (typeof item === 'string') {\n        excludedUrl = {\n          urlPattern: new RegExp(item, 'i'),\n          httpMethods: []\n        };\n      } else {\n        excludedUrl = {\n          urlPattern: new RegExp(item.url, 'i'),\n          httpMethods: item.httpMethods\n        };\n      }\n      excludedUrls.push(excludedUrl);\n    }\n    return excludedUrls;\n  }\n  /**\n   * Handles the class values initialization.\n   *\n   * @param options\n   */\n  initServiceValues({\n    enableBearerInterceptor = true,\n    loadUserProfileAtStartUp = false,\n    bearerExcludedUrls = [],\n    authorizationHeaderName = 'Authorization',\n    bearerPrefix = 'Bearer',\n    initOptions,\n    updateMinValidity = 20,\n    shouldAddToken = () => true,\n    shouldUpdateToken = () => true\n  }) {\n    this._enableBearerInterceptor = enableBearerInterceptor;\n    this._loadUserProfileAtStartUp = loadUserProfileAtStartUp;\n    this._authorizationHeaderName = authorizationHeaderName;\n    this._bearerPrefix = bearerPrefix.trim().concat(' ');\n    this._excludedUrls = this.loadExcludedUrls(bearerExcludedUrls);\n    this._silentRefresh = initOptions ? initOptions.flow === 'implicit' : false;\n    this._updateMinValidity = updateMinValidity;\n    this.shouldAddToken = shouldAddToken;\n    this.shouldUpdateToken = shouldUpdateToken;\n  }\n  /**\n   * Keycloak initialization. It should be called to initialize the adapter.\n   * Options is an object with 2 main parameters: config and initOptions. The first one\n   * will be used to create the Keycloak instance. The second one are options to initialize the\n   * keycloak instance.\n   *\n   * @param options\n   * Config: may be a string representing the keycloak URI or an object with the\n   * following content:\n   * - url: Keycloak json URL\n   * - realm: realm name\n   * - clientId: client id\n   *\n   * initOptions:\n   * Options to initialize the Keycloak adapter, matches the options as provided by Keycloak itself.\n   *\n   * enableBearerInterceptor:\n   * Flag to indicate if the bearer will added to the authorization header.\n   *\n   * loadUserProfileInStartUp:\n   * Indicates that the user profile should be loaded at the keycloak initialization,\n   * just after the login.\n   *\n   * bearerExcludedUrls:\n   * String Array to exclude the urls that should not have the Authorization Header automatically\n   * added.\n   *\n   * authorizationHeaderName:\n   * This value will be used as the Authorization Http Header name.\n   *\n   * bearerPrefix:\n   * This value will be included in the Authorization Http Header param.\n   *\n   * tokenUpdateExcludedHeaders:\n   * Array of Http Header key/value maps that should not trigger the token to be updated.\n   *\n   * updateMinValidity:\n   * This value determines if the token will be refreshed based on its expiration time.\n   *\n   * @returns\n   * A Promise with a boolean indicating if the initialization was successful.\n   */\n  async init(options = {}) {\n    this.initServiceValues(options);\n    const {\n      config,\n      initOptions\n    } = options;\n    this._instance = new Keycloak(config);\n    this.bindsKeycloakEvents();\n    const authenticated = await this._instance.init(initOptions);\n    if (authenticated && this._loadUserProfileAtStartUp) {\n      await this.loadUserProfile();\n    }\n    return authenticated;\n  }\n  /**\n   * Redirects to login form on (options is an optional object with redirectUri and/or\n   * prompt fields).\n   *\n   * @param options\n   * Object, where:\n   *  - redirectUri: Specifies the uri to redirect to after login.\n   *  - prompt:By default the login screen is displayed if the user is not logged-in to Keycloak.\n   * To only authenticate to the application if the user is already logged-in and not display the\n   * login page if the user is not logged-in, set this option to none. To always require\n   * re-authentication and ignore SSO, set this option to login .\n   *  - maxAge: Used just if user is already authenticated. Specifies maximum time since the\n   * authentication of user happened. If user is already authenticated for longer time than\n   * maxAge, the SSO is ignored and he will need to re-authenticate again.\n   *  - loginHint: Used to pre-fill the username/email field on the login form.\n   *  - action: If value is 'register' then user is redirected to registration page, otherwise to\n   * login page.\n   *  - locale: Specifies the desired locale for the UI.\n   * @returns\n   * A void Promise if the login is successful and after the user profile loading.\n   */\n  async login(options = {}) {\n    await this._instance.login(options);\n    if (this._loadUserProfileAtStartUp) {\n      await this.loadUserProfile();\n    }\n  }\n  /**\n   * Redirects to logout.\n   *\n   * @param redirectUri\n   * Specifies the uri to redirect to after logout.\n   * @returns\n   * A void Promise if the logout was successful, cleaning also the userProfile.\n   */\n  async logout(redirectUri) {\n    const options = {\n      redirectUri\n    };\n    await this._instance.logout(options);\n    this._userProfile = undefined;\n  }\n  /**\n   * Redirects to registration form. Shortcut for login with option\n   * action = 'register'. Options are same as for the login method but 'action' is set to\n   * 'register'.\n   *\n   * @param options\n   * login options\n   * @returns\n   * A void Promise if the register flow was successful.\n   */\n  async register(options = {\n    action: 'register'\n  }) {\n    await this._instance.register(options);\n  }\n  /**\n   * Check if the user has access to the specified role. It will look for roles in\n   * realm and the given resource, but will not check if the user is logged in for better performance.\n   *\n   * @param role\n   * role name\n   * @param resource\n   * resource name. If not specified, `clientId` is used\n   * @returns\n   * A boolean meaning if the user has the specified Role.\n   */\n  isUserInRole(role, resource) {\n    let hasRole;\n    hasRole = this._instance.hasResourceRole(role, resource);\n    if (!hasRole) {\n      hasRole = this._instance.hasRealmRole(role);\n    }\n    return hasRole;\n  }\n  /**\n   * Return the roles of the logged user. The realmRoles parameter, with default value\n   * true, will return the resource roles and realm roles associated with the logged user. If set to false\n   * it will only return the resource roles. The resource parameter, if specified, will return only resource roles\n   * associated with the given resource.\n   *\n   * @param realmRoles\n   * Set to false to exclude realm roles (only client roles)\n   * @param resource\n   * resource name If not specified, returns roles from all resources\n   * @returns\n   * Array of Roles associated with the logged user.\n   */\n  getUserRoles(realmRoles = true, resource) {\n    let roles = [];\n    if (this._instance.resourceAccess) {\n      Object.keys(this._instance.resourceAccess).forEach(key => {\n        if (resource && resource !== key) {\n          return;\n        }\n        const resourceAccess = this._instance.resourceAccess[key];\n        const clientRoles = resourceAccess['roles'] || [];\n        roles = roles.concat(clientRoles);\n      });\n    }\n    if (realmRoles && this._instance.realmAccess) {\n      const realmRoles = this._instance.realmAccess['roles'] || [];\n      roles.push(...realmRoles);\n    }\n    return roles;\n  }\n  /**\n   * Check if user is logged in.\n   *\n   * @returns\n   * A boolean that indicates if the user is logged in.\n   */\n  isLoggedIn() {\n    if (!this._instance) {\n      return false;\n    }\n    return this._instance.authenticated;\n  }\n  /**\n   * Returns true if the token has less than minValidity seconds left before\n   * it expires.\n   *\n   * @param minValidity\n   * Seconds left. (minValidity) is optional. Default value is 0.\n   * @returns\n   * Boolean indicating if the token is expired.\n   */\n  isTokenExpired(minValidity = 0) {\n    return this._instance.isTokenExpired(minValidity);\n  }\n  /**\n   * If the token expires within _updateMinValidity seconds the token is refreshed. If the\n   * session status iframe is enabled, the session status is also checked.\n   * Returns a promise telling if the token was refreshed or not. If the session is not active\n   * anymore, the promise is rejected.\n   *\n   * @param minValidity\n   * Seconds left. (minValidity is optional, if not specified updateMinValidity - default 20 is used)\n   * @returns\n   * Promise with a boolean indicating if the token was succesfully updated.\n   */\n  async updateToken(minValidity = this._updateMinValidity) {\n    // TODO: this is a workaround until the silent refresh (issue #43)\n    // is not implemented, avoiding the redirect loop.\n    if (this._silentRefresh) {\n      if (this.isTokenExpired()) {\n        throw new Error('Failed to refresh the token, or the session is expired');\n      }\n      return true;\n    }\n    if (!this._instance) {\n      throw new Error('Keycloak Angular library is not initialized.');\n    }\n    try {\n      return await this._instance.updateToken(minValidity);\n    } catch (error) {\n      return false;\n    }\n  }\n  /**\n   * Loads the user profile.\n   * Returns promise to set functions to be invoked if the profile was loaded\n   * successfully, or if the profile could not be loaded.\n   *\n   * @param forceReload\n   * If true will force the loadUserProfile even if its already loaded.\n   * @returns\n   * A promise with the KeycloakProfile data loaded.\n   */\n  async loadUserProfile(forceReload = false) {\n    if (this._userProfile && !forceReload) {\n      return this._userProfile;\n    }\n    if (!this._instance.authenticated) {\n      throw new Error('The user profile was not loaded as the user is not logged in.');\n    }\n    return this._userProfile = await this._instance.loadUserProfile();\n  }\n  /**\n   * Returns the authenticated token.\n   */\n  async getToken() {\n    return this._instance.token;\n  }\n  /**\n   * Returns the logged username.\n   *\n   * @returns\n   * The logged username.\n   */\n  getUsername() {\n    if (!this._userProfile) {\n      throw new Error('User not logged in or user profile was not loaded.');\n    }\n    return this._userProfile.username;\n  }\n  /**\n   * Clear authentication state, including tokens. This can be useful if application\n   * has detected the session was expired, for example if updating token fails.\n   * Invoking this results in onAuthLogout callback listener being invoked.\n   */\n  clearToken() {\n    this._instance.clearToken();\n  }\n  /**\n   * Adds a valid token in header. The key & value format is:\n   * Authorization Bearer <token>.\n   * If the headers param is undefined it will create the Angular headers object.\n   *\n   * @param headers\n   * Updated header with Authorization and Keycloak token.\n   * @returns\n   * An observable with with the HTTP Authorization header and the current token.\n   */\n  addTokenToHeader(headers = new HttpHeaders()) {\n    return from(this.getToken()).pipe(map(token => token ? headers.set(this._authorizationHeaderName, this._bearerPrefix + token) : headers));\n  }\n  /**\n   * Returns the original Keycloak instance, if you need any customization that\n   * this Angular service does not support yet. Use with caution.\n   *\n   * @returns\n   * The KeycloakInstance from keycloak-js.\n   */\n  getKeycloakInstance() {\n    return this._instance;\n  }\n  /**\n   * @deprecated\n   * Returns the excluded URLs that should not be considered by\n   * the http interceptor which automatically adds the authorization header in the Http Request.\n   *\n   * @returns\n   * The excluded urls that must not be intercepted by the KeycloakBearerInterceptor.\n   */\n  get excludedUrls() {\n    return this._excludedUrls;\n  }\n  /**\n   * Flag to indicate if the bearer will be added to the authorization header.\n   *\n   * @returns\n   * Returns if the bearer interceptor was set to be disabled.\n   */\n  get enableBearerInterceptor() {\n    return this._enableBearerInterceptor;\n  }\n  /**\n   * Keycloak subject to monitor the events triggered by keycloak-js.\n   * The following events as available (as described at keycloak docs -\n   * https://www.keycloak.org/docs/latest/securing_apps/index.html#callback-events):\n   * - OnAuthError\n   * - OnAuthLogout\n   * - OnAuthRefreshError\n   * - OnAuthRefreshSuccess\n   * - OnAuthSuccess\n   * - OnReady\n   * - OnTokenExpire\n   * In each occurrence of any of these, this subject will return the event type,\n   * described at {@link KeycloakEventTypeLegacy} enum and the function args from the keycloak-js\n   * if provided any.\n   *\n   * @returns\n   * A subject with the {@link KeycloakEventLegacy} which describes the event type and attaches the\n   * function args.\n   */\n  get keycloakEvents$() {\n    return this._keycloakEvents$;\n  }\n  static {\n    this.fac = function KeycloakService_Factory(__ngFactoryType__) {\n      return new (__ngFactoryType__ || KeycloakService)();\n    };\n  }\n  static {\n    this.prov = /* @__PURE__ */i0.defineInjectable({\n      token: KeycloakService,\n      factory: KeycloakService.fac\n    });\n  }\n}\n(() => {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && i0.setClassMetadata(KeycloakService, [{\n    type: Injectable\n  }], null, null);\n})();\n\n/**\n * @license\n * Copyright Mauricio Gemelli Vigolo and contributors.\n *\n * Use of this source code is governed by a MIT-style license that can be\n * found in the LICENSE file at https://github.com/mauriciovigolo/keycloak-angular/blob/main/LICENSE.md\n */\n/**\n * This interceptor includes the bearer by default in all HttpClient requests.\n *\n * If you need to exclude some URLs from adding the bearer, please, take a look\n * at the {@link KeycloakOptions} bearerExcludedUrls property.\n *\n * @deprecated KeycloakBearerInterceptor is deprecated and will be removed in future versions.\n * Use the new functional interceptor such as `includeBearerTokenInterceptor`.\n * More info: https://github.com/mauriciovigolo/keycloak-angular/docs/migration-guides/v19.md\n */\nclass KeycloakBearerInterceptor {\n  constructor(keycloak) {\n    this.keycloak = keycloak;\n  }\n  /**\n   * Calls to update the keycloak token if the request should update the token.\n   *\n   * @param req http request from @angular http module.\n   * @returns\n   * A promise boolean for the token update or noop result.\n   */\n  async conditionallyUpdateToken(req) {\n    if (this.keycloak.shouldUpdateToken(req)) {\n      return await this.keycloak.updateToken();\n    }\n    return true;\n  }\n  /**\n   * @deprecated\n   * Checks if the url is excluded from having the Bearer Authorization\n   * header added.\n   *\n   * @param req http request from @angular http module.\n   * @param excludedUrlRegex contains the url pattern and the http methods,\n   * excluded from adding the bearer at the Http Request.\n   */\n  isUrlExcluded({\n    method,\n    url\n  }, {\n    urlPattern,\n    httpMethods\n  }) {\n    const httpTest = httpMethods.length === 0 || httpMethods.join().indexOf(method.toUpperCase()) > -1;\n    const urlTest = urlPattern.test(url);\n    return httpTest && urlTest;\n  }\n  /**\n   * Intercept implementation that checks if the request url matches the excludedUrls.\n   * If not, adds the Authorization header to the request if the user is logged in.\n   *\n   * @param req\n   * @param next\n   */\n  intercept(req, next) {\n    const {\n      enableBearerInterceptor,\n      excludedUrls\n    } = this.keycloak;\n    if (!enableBearerInterceptor) {\n      return next.handle(req);\n    }\n    const shallPass = !this.keycloak.shouldAddToken(req) || excludedUrls.findIndex(item => this.isUrlExcluded(req, item)) > -1;\n    if (shallPass) {\n      return next.handle(req);\n    }\n    return combineLatest([from(this.conditionallyUpdateToken(req)), of(this.keycloak.isLoggedIn())]).pipe(mergeMap(([_, isLoggedIn]) => isLoggedIn ? this.handleRequestWithTokenHeader(req, next) : next.handle(req)));\n  }\n  /**\n   * Adds the token of the current user to the Authorization header\n   *\n   * @param req\n   * @param next\n   */\n  handleRequestWithTokenHeader(req, next) {\n    return this.keycloak.addTokenToHeader(req.headers).pipe(mergeMap(headersWithBearer => {\n      const kcReq = req.clone({\n        headers: headersWithBearer\n      });\n      return next.handle(kcReq);\n    }));\n  }\n  static {\n    this.fac = function KeycloakBearerInterceptor_Factory(__ngFactoryType__) {\n      return new (__ngFactoryType__ || KeycloakBearerInterceptor)(i0.inject(KeycloakService));\n    };\n  }\n  static {\n    this.prov = /* @__PURE__ */i0.defineInjectable({\n      token: KeycloakBearerInterceptor,\n      factory: KeycloakBearerInterceptor.fac\n    });\n  }\n}\n(() => {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && i0.setClassMetadata(KeycloakBearerInterceptor, [{\n    type: Injectable\n  }], () => [{\n    type: KeycloakService\n  }], null);\n})();\n\n/**\n * @license\n * Copyright Mauricio Gemelli Vigolo and contributors.\n *\n * Use of this source code is governed by a MIT-style license that can be\n * found in the LICENSE file at https://github.com/mauriciovigolo/keycloak-angular/blob/main/LICENSE.md\n */\n/**\n * @deprecated NgModules are deprecated in Keycloak Angular and will be removed in future versions.\n * Use the new `provideKeycloak` function to load Keycloak in an Angular application.\n * More info: https://github.com/mauriciovigolo/keycloak-angular/docs/migration-guides/v19.md\n */\nclass CoreModule {\n  static {\n    this.fac = function CoreModule_Factory(__ngFactoryType__) {\n      return new (__ngFactoryType__ || CoreModule)();\n    };\n  }\n  static {\n    this.mod = /* @__PURE__ */i0.defineNgModule({\n      type: CoreModule,\n      imports: [CommonModule]\n    });\n  }\n  static {\n    this.inj = /* @__PURE__ */i0.defineInjector({\n      providers: [KeycloakService, {\n        provide: HTTP_INTERCEPTORS,\n        useClass: KeycloakBearerInterceptor,\n        multi: true\n      }],\n      imports: [CommonModule]\n    });\n  }\n}\n(() => {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && i0.setClassMetadata(CoreModule, [{\n    type: NgModule,\n    args: [{\n      imports: [CommonModule],\n      providers: [KeycloakService, {\n        provide: HTTP_INTERCEPTORS,\n        useClass: KeycloakBearerInterceptor,\n        multi: true\n      }]\n    }]\n  }], null, null);\n})();\n\n/**\n * @license\n * Copyright Mauricio Gemelli Vigolo and contributors.\n *\n * Use of this source code is governed by a MIT-style license that can be\n * found in the LICENSE file at https://github.com/mauriciovigolo/keycloak-angular/blob/main/LICENSE.md\n */\n/**\n * @deprecated NgModules are deprecated in Keycloak Angular and will be removed in future versions.\n * Use the new `provideKeycloak` function to load Keycloak in an Angular application.\n * More info: https://github.com/mauriciovigolo/keycloak-angular/docs/migration-guides/v19.md\n */\nclass KeycloakAngularModule {\n  static {\n    this.fac = function KeycloakAngularModule_Factory(__ngFactoryType__) {\n      return new (__ngFactoryType__ || KeycloakAngularModule)();\n    };\n  }\n  static {\n    this.mod = /* @__PURE__ */i0.defineNgModule({\n      type: KeycloakAngularModule,\n      imports: [CoreModule]\n    });\n  }\n  static {\n    this.inj = /* @__PURE__ */i0.defineInjector({\n      imports: [CoreModule]\n    });\n  }\n}\n(() => {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && i0.setClassMetadata(KeycloakAngularModule, [{\n    type: NgModule,\n    args: [{\n      imports: [CoreModule]\n    }]\n  }], null, null);\n})();\n\n/**\n * @license\n * Copyright Mauricio Gemelli Vigolo All Rights Reserved.\n *\n * Use of this source code is governed by a MIT-style license that can be\n * found in the LICENSE file at https://github.com/mauriciovigolo/keycloak-angular/blob/main/LICENSE.md\n */\n// This legacy implementation will be removed in Keycloak Angular v20\n\n/**\n * @license\n * Copyright Mauricio Gemelli Vigolo All Rights Reserved.\n *\n * Use of this source code is governed by a MIT-style license that can be\n * found in the LICENSE file at https://github.com/mauriciovigolo/keycloak-angular/blob/main/LICENSE.md\n */\n/**\n * Keycloak event types, as described at the keycloak-js documentation:\n * https://www.keycloak.org/docs/latest/securing_apps/index.html#callback-events\n */\nvar KeycloakEventType;\n(function (KeycloakEventType) {\n  /**\n   * Keycloak Angular is not initialized yet. This is the initial state applied to the Keycloak Event Signal.\n   * Note: This event is only emitted in Keycloak Angular, it is not part of the keycloak-js.\n   */\n  KeycloakEventType[\"KeycloakAngularNotInitialized\"] = \"KeycloakAngularNotInitialized\";\n  /**\n   * Keycloak Angular is in the process of initializing the providers and Keycloak Instance.\n   * Note: This event is only emitted in Keycloak Angular, it is not part of the keycloak-js.\n   */\n  KeycloakEventType[\"KeycloakAngularInit\"] = \"KeycloakAngularInit\";\n  /**\n   * Triggered if there is an error during authentication.\n   */\n  KeycloakEventType[\"AuthError\"] = \"AuthError\";\n  /**\n   * Triggered when the user logs out. This event will only be triggered\n   * if the session status iframe is enabled or in Cordova mode.\n   */\n  KeycloakEventType[\"AuthLogout\"] = \"AuthLogout\";\n  /**\n   * Triggered if an error occurs while attempting to refresh the token.\n   */\n  KeycloakEventType[\"AuthRefreshError\"] = \"AuthRefreshError\";\n  /**\n   * Triggered when the token is successfully refreshed.\n   */\n  KeycloakEventType[\"AuthRefreshSuccess\"] = \"AuthRefreshSuccess\";\n  /**\n   * Triggered when a user is successfully authenticated.\n   */\n  KeycloakEventType[\"AuthSuccess\"] = \"AuthSuccess\";\n  /**\n   * Triggered when the Keycloak adapter has completed initialization.\n   */\n  KeycloakEventType[\"Ready\"] = \"Ready\";\n  /**\n   * Triggered when the access token expires. Depending on the flow, you may\n   * need to use `updateToken` to refresh the token or redirect the user\n   * to the login screen.\n   */\n  KeycloakEventType[\"TokenExpired\"] = \"TokenExpired\";\n  /**\n   * Triggered when an authentication action is requested by the application.\n   */\n  KeycloakEventType[\"ActionUpdate\"] = \"ActionUpdate\";\n})(KeycloakEventType || (KeycloakEventType = {}));\n/**\n * Helper function to typecast unknown arguments into a specific Keycloak event type.\n *\n * @template T - The expected argument type.\n * @param args - The arguments to be cast.\n * @returns The arguments typed as `T`.\n */\nconst typeEventArgs = args => args;\n/**\n * Creates a signal to manage Keycloak events, initializing the signal with\n * appropriate default values or values from a given Keycloak instance.\n *\n * @param keycloak - An instance of the Keycloak client.\n * @returns A `Signal` that tracks the current Keycloak event state.\n */\nconst createKeycloakSignal = keycloak => {\n  const keycloakSignal = signal({\n    type: KeycloakEventType.KeycloakAngularInit\n  });\n  if (!keycloak) {\n    keycloakSignal.set({\n      type: KeycloakEventType.KeycloakAngularNotInitialized\n    });\n    return keycloakSignal;\n  }\n  keycloak.onReady = authenticated => {\n    keycloakSignal.set({\n      type: KeycloakEventType.Ready,\n      args: authenticated\n    });\n  };\n  keycloak.onAuthError = errorData => {\n    keycloakSignal.set({\n      type: KeycloakEventType.AuthError,\n      args: errorData\n    });\n  };\n  keycloak.onAuthLogout = () => {\n    keycloakSignal.set({\n      type: KeycloakEventType.AuthLogout\n    });\n  };\n  keycloak.onActionUpdate = (status, action) => {\n    keycloakSignal.set({\n      type: KeycloakEventType.ActionUpdate,\n      args: {\n        status,\n        action\n      }\n    });\n  };\n  keycloak.onAuthRefreshError = () => {\n    keycloakSignal.set({\n      type: KeycloakEventType.AuthRefreshError\n    });\n  };\n  keycloak.onAuthRefreshSuccess = () => {\n    keycloakSignal.set({\n      type: KeycloakEventType.AuthRefreshSuccess\n    });\n  };\n  keycloak.onAuthSuccess = () => {\n    keycloakSignal.set({\n      type: KeycloakEventType.AuthSuccess\n    });\n  };\n  keycloak.onTokenExpired = () => {\n    keycloakSignal.set({\n      type: KeycloakEventType.TokenExpired\n    });\n  };\n  return keycloakSignal;\n};\n/**\n * Injection token for the Keycloak events signal, used for dependency injection.\n */\nconst KEYCLOAK_EVENT_SIGNAL = new InjectionToken('Keycloak Events Signal');\n\n/**\n * @license\n * Copyright Mauricio Gemelli Vigolo All Rights Reserved.\n *\n * Use of this source code is governed by a MIT-style license that can be\n * found in the LICENSE file at https://github.com/mauriciovigolo/keycloak-angular/blob/main/LICENSE.md\n */\n/**\n * Structural directive to conditionally display elements based on Keycloak user roles.\n *\n * This directive checks if the authenticated user has at least one of the specified roles.\n * Roles can be validated against a specific **resource (client ID)** or the **realm**.\n *\n * ### Features:\n * - Supports role checking in both **resources (client-level roles)** and the **realm**.\n * - Accepts an array of roles to match.\n * - Optional configuration to check realm-level roles.\n *\n * ### Inputs:\n * - `kaHasRoles` (Required): Array of roles to validate.\n * - `resource` (Optional): The client ID or resource name to validate resource-level roles.\n * - `checkRealm` (Optional): A boolean flag to enable realm role validation (default is `false`).\n *\n * ### Requirements:\n * - A Keycloak instance must be injected via Angular's dependency injection.\n * - The user must be authenticated in Keycloak.\n *\n * @example\n * #### Example 1: Check for Global Realm Roles\n * Show the content only if the user has the `admin` or `editor` role in the realm.\n * ```html\n * <div *kaHasRoles=\"['admin', 'editor']; checkRealm:true\">\n *   <p>This content is visible only to users with 'admin' or 'editor' realm roles.</p>\n * </div>\n * ```\n *\n * @example\n * #### Example 2: Check for Resource Roles\n * Show the content only if the user has the `read` or `write` role for a specific resource (`my-client`).\n * ```html\n * <div *kaHasRoles=\"['read', 'write']; resource:'my-client'\">\n *   <p>This content is visible only to users with 'read' or 'write' roles for 'my-client'.</p>\n * </div>\n * ```\n *\n * @example\n * #### Example 3: Check for Both Resource and Realm Roles\n * Show the content if the user has the roles in either the realm or a resource.\n * ```html\n * <div *kaHasRoles=\"['admin', 'write']; resource:'my-client' checkRealm:true\">\n *   <p>This content is visible to users with 'admin' in the realm or 'write' in 'my-client'.</p>\n * </div>\n * ```\n *\n * @example\n * #### Example 4: Fallback Content When Roles Do Not Match\n * Use an `<ng-template>` to display fallback content if the user lacks the required roles.\n * ```html\n * <div *kaHasRoles=\"['admin']; resource:'my-client'\">\n *   <p>Welcome, Admin!</p>\n * </div>\n * <ng-template #noAccess>\n *   <p>Access Denied</p>\n * </ng-template>\n * ```\n */\nclass HasRolesDirective {\n  constructor(templateRef, viewContainer, keycloak) {\n    this.templateRef = templateRef;\n    this.viewContainer = viewContainer;\n    this.keycloak = keycloak;\n    /**\n     * List of roles to validate against the resource or realm.\n     */\n    this.roles = [];\n    /**\n     * Flag to enable realm-level role validation.\n     */\n    this.checkRealm = false;\n    this.viewContainer.clear();\n    const keycloakSignal = inject(KEYCLOAK_EVENT_SIGNAL);\n    effect(() => {\n      const keycloakEvent = keycloakSignal();\n      if (keycloakEvent.type !== KeycloakEventType.Ready) {\n        return;\n      }\n      const authenticated = typeEventArgs(keycloakEvent.args);\n      if (authenticated) {\n        this.render();\n      }\n    });\n  }\n  render() {\n    const hasAccess = this.checkUserRoles();\n    if (hasAccess) {\n      this.viewContainer.createEmbeddedView(this.templateRef);\n    } else {\n      this.viewContainer.clear();\n    }\n  }\n  /**\n   * Checks if the user has at least one of the specified roles in the resource or realm.\n   * @returns True if the user has access, false otherwise.\n   */\n  checkUserRoles() {\n    const hasResourceRole = this.roles.some(role => this.keycloak.hasResourceRole(role, this.resource));\n    const hasRealmRole = this.checkRealm ? this.roles.some(role => this.keycloak.hasRealmRole(role)) : false;\n    return hasResourceRole || hasRealmRole;\n  }\n  static {\n    this.fac = function HasRolesDirective_Factory(__ngFactoryType__) {\n      return new (__ngFactoryType__ || HasRolesDirective)(i0.directiveInject(i0.TemplateRef), i0.directiveInject(i0.ViewContainerRef), i0.directiveInject(Keycloak));\n    };\n  }\n  static {\n    this.dir = /* @__PURE__ */i0.defineDirective({\n      type: HasRolesDirective,\n      selectors: [[\"\", \"kaHasRoles\", \"\"]],\n      inputs: {\n        roles: [0, \"kaHasRoles\", \"roles\"],\n        resource: [0, \"kaHasRolesResource\", \"resource\"],\n        checkRealm: [0, \"kaHasRolesCheckRealm\", \"checkRealm\"]\n      }\n    });\n  }\n}\n(() => {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && i0.setClassMetadata(HasRolesDirective, [{\n    type: Directive,\n    args: [{\n      selector: '[kaHasRoles]'\n    }]\n  }], () => [{\n    type: i0.TemplateRef\n  }, {\n    type: i0.ViewContainerRef\n  }, {\n    type: Keycloak\n  }], {\n    roles: [{\n      type: Input,\n      args: ['kaHasRoles']\n    }],\n    resource: [{\n      type: Input,\n      args: ['kaHasRolesResource']\n    }],\n    checkRealm: [{\n      type: Input,\n      args: ['kaHasRolesCheckRealm']\n    }]\n  });\n})();\n\n/**\n * @license\n * Copyright Mauricio Gemelli Vigolo All Rights Reserved.\n *\n * Use of this source code is governed by a MIT-style license that can be\n * found in the LICENSE file at https://github.com/mauriciovigolo/keycloak-angular/blob/main/LICENSE.md\n */\n\n/**\n * @license\n * Copyright Mauricio Gemelli Vigolo All Rights Reserved.\n *\n * Use of this source code is governed by a MIT-style license that can be\n * found in the LICENSE file at https://github.com/mauriciovigolo/keycloak-angular/blob/main/LICENSE.md\n */\n/**\n * Service to monitor user activity in an Angular application.\n * Tracks user interactions (e.g., mouse movement, touch, key presses, clicks, and scrolls)\n * and updates the last activity timestamp. Consumers can check for user inactivity\n * based on a configurable timeout.\n *\n * The service is supposed to be used in the client context and for safety, it checks during the startup\n * if it is a browser context.\n */\nclass UserActivityService {\n  constructor(ngZone) {\n    this.ngZone = ngZone;\n    /**\n     * Signal to store the timestamp of the last user activity.\n     * The timestamp is represented as the number of milliseconds since epoch.\n     */\n    this.lastActivity = signal(Date.now());\n    /**\n     * Subject to signal the destruction of the service.\n     * Used to clean up RxJS subscriptions.\n     */\n    this.destroy$ = new Subject();\n    /**\n     * Computed signal to expose the last user activity as a read-only signal.\n     */\n    this.lastActivitySignal = computed(() => this.lastActivity());\n  }\n  /**\n   * Starts monitoring user activity events (`mousemove`, `touchstart`, `keydown`, `click`, `scroll`)\n   * and updates the last activity timestamp using RxJS with debounce.\n   * The events are processed outside Angular zone for performance optimization.\n   */\n  startMonitoring() {\n    const isBrowser = isPlatformBrowser(inject(PLATFORM_ID));\n    if (!isBrowser) {\n      return;\n    }\n    this.ngZone.runOutsideAngular(() => {\n      const events = ['mousemove', 'touchstart', 'keydown', 'click', 'scroll'];\n      events.forEach(event => {\n        fromEvent(window, event).pipe(debounceTime(300), takeUntil(this.destroy$)).subscribe(() => this.updateLastActivity());\n      });\n    });\n  }\n  /**\n   * Updates the last activity timestamp to the current time.\n   * This method runs inside Angular's zone to ensure reactivity with Angular signals.\n   */\n  updateLastActivity() {\n    this.ngZone.run(() => {\n      this.lastActivity.set(Date.now());\n    });\n  }\n  /**\n   * Retrieves the timestamp of the last recorded user activity.\n   * @returns {number} The last activity timestamp in milliseconds since epoch.\n   */\n  get lastActivityTime() {\n    return this.lastActivity();\n  }\n  /**\n   * Determines whether the user interacted with the application, meaning it is activily using the application, based on\n   * the specified duration.\n   * @param timeout - The inactivity timeout in milliseconds.\n   * @returns {boolean} `true` if the user is inactive, otherwise `false`.\n   */\n  isActive(timeout) {\n    return Date.now() - this.lastActivityTime < timeout;\n  }\n  /**\n   * Cleans up RxJS subscriptions and resources when the service is destroyed.\n   * This method is automatically called by Angular when the service is removed.\n   */\n  ngOnDestroy() {\n    this.destroy$.next();\n    this.destroy$.complete();\n  }\n  static {\n    this.fac = function UserActivityService_Factory(__ngFactoryType__) {\n      return new (__ngFactoryType__ || UserActivityService)(i0.inject(i0.NgZone));\n    };\n  }\n  static {\n    this.prov = /* @__PURE__ */i0.defineInjectable({\n      token: UserActivityService,\n      factory: UserActivityService.fac\n    });\n  }\n}\n(() => {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && i0.setClassMetadata(UserActivityService, [{\n    type: Injectable\n  }], () => [{\n    type: i0.NgZone\n  }], null);\n})();\n\n/**\n * @license\n * Copyright Mauricio Gemelli Vigolo All Rights Reserved.\n *\n * Use of this source code is governed by a MIT-style license that can be\n * found in the LICENSE file at https://github.com/mauriciovigolo/keycloak-angular/blob/main/LICENSE.md\n */\n/**\n * Service to automatically manage the Keycloak token refresh process\n * based on user activity and token expiration events. This service\n * integrates with Keycloak for session management and interacts with\n * user activity monitoring to determine the appropriate action when\n * the token expires.\n *\n * The service listens to `KeycloakSignal` for token-related events\n * (e.g., `TokenExpired`) and provides configurable options for\n * session timeout and inactivity handling.\n */\nclass AutoRefreshTokenService {\n  constructor(keycloak, userActivity) {\n    this.keycloak = keycloak;\n    this.userActivity = userActivity;\n    this.options = this.defaultOptions;\n    this.initialized = false;\n    const keycloakSignal = inject(KEYCLOAK_EVENT_SIGNAL);\n    effect(() => {\n      const keycloakEvent = keycloakSignal();\n      if (keycloakEvent.type === KeycloakEventType.TokenExpired) {\n        this.processTokenExpiredEvent();\n      }\n    });\n  }\n  get defaultOptions() {\n    return {\n      sessionTimeout: 300000,\n      onInactivityTimeout: 'logout'\n    };\n  }\n  executeOnInactivityTimeout() {\n    switch (this.options.onInactivityTimeout) {\n      case 'login':\n        this.keycloak.login().catch(error => console.error('Failed to execute the login call', error));\n        break;\n      case 'logout':\n        this.keycloak.logout().catch(error => console.error('Failed to execute the logout call', error));\n        break;\n      default:\n        break;\n    }\n  }\n  processTokenExpiredEvent() {\n    if (!this.initialized || !this.keycloak.authenticated) {\n      return;\n    }\n    if (this.userActivity.isActive(this.options.sessionTimeout)) {\n      this.keycloak.updateToken().catch(() => this.executeOnInactivityTimeout());\n    } else {\n      this.executeOnInactivityTimeout();\n    }\n  }\n  start(options) {\n    this.options = {\n      ...this.defaultOptions,\n      ...options\n    };\n    this.initialized = true;\n    this.userActivity.startMonitoring();\n  }\n  static {\n    this.fac = function AutoRefreshTokenService_Factory(__ngFactoryType__) {\n      return new (__ngFactoryType__ || AutoRefreshTokenService)(i0.inject(Keycloak), i0.inject(UserActivityService));\n    };\n  }\n  static {\n    this.prov = /* @__PURE__ */i0.defineInjectable({\n      token: AutoRefreshTokenService,\n      factory: AutoRefreshTokenService.fac\n    });\n  }\n}\n(() => {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && i0.setClassMetadata(AutoRefreshTokenService, [{\n    type: Injectable\n  }], () => [{\n    type: Keycloak\n  }, {\n    type: UserActivityService\n  }], null);\n})();\n\n/**\n * @license\n * Copyright Mauricio Gemelli Vigolo All Rights Reserved.\n *\n * Use of this source code is governed by a MIT-style license that can be\n * found in the LICENSE file at https://github.com/mauriciovigolo/keycloak-angular/blob/main/LICENSE.md\n */\n/**\n * Enables automatic token refresh and session inactivity handling for a\n * Keycloak-enabled Angular application.\n *\n * This function initializes a service that tracks user interactions, such as\n * mouse movements, touches, key presses, clicks, and scrolls. If user activity\n * is detected, it periodically calls `Keycloak.updateToken` to ensure the bearer\n * token remains valid and does not expire.\n *\n * If the session remains inactive beyond the defined `sessionTimeout`, the\n * specified action (`logout`, `login`, or `none`) will be executed. By default,\n * the service will call `keycloak.logout` upon inactivity timeout.\n *\n * Event tracking uses RxJS observables with a debounce of 300 milliseconds to\n * monitor user interactions. When the Keycloak `OnTokenExpired` event occurs,\n * the service checks the user's last activity timestamp. If the user has been\n * active within the session timeout period, it refreshes the token using `updateToken`.\n *\n *\n * @param options - Configuration options for the auto-refresh token feature.\n *   - `sessionTimeout` (optional): The duration in milliseconds after which\n *     the session is considered inactive. Defaults to `300000` (5 minutes).\n *   - `onInactivityTimeout` (optional): The action to take when session inactivity\n *     exceeds the specified timeout. Defaults to `'logout'`.\n *       - `'login'`: Execute `keycloak.login` function.\n *       - `'logout'`: Logs the user out by calling `keycloak.logout`.\n *       - `'none'`: No action is taken.\n *\n * @returns A `KeycloakFeature` instance that configures and enables the\n * auto-refresh token functionality.\n */\nfunction withAutoRefreshToken(options) {\n  return {\n    configure: () => {\n      const autoRefreshTokenService = inject(AutoRefreshTokenService);\n      autoRefreshTokenService.start(options);\n    }\n  };\n}\n\n/**\n * @license\n * Copyright Mauricio Gemelli Vigolo All Rights Reserved.\n *\n * Use of this source code is governed by a MIT-style license that can be\n * found in the LICENSE file at https://github.com/mauriciovigolo/keycloak-angular/blob/main/LICENSE.md\n */\nconst mapResourceRoles = (resourceAccess = {}) => {\n  return Object.entries(resourceAccess).reduce((roles, [key, value]) => {\n    roles[key] = value.roles;\n    return roles;\n  }, {});\n};\n/**\n * Creates a custom authorization guard for Angular routes, enabling fine-grained access control.\n *\n * This guard invokes the provided `isAccessAllowed` function to determine if access is permitted\n * based on the current route, router state, and user's authentication and roles data.\n *\n * @template T - The type of the guard function (`CanActivateFn` or `CanActivateChildFn`).\n * @param isAccessAllowed - A callback function that evaluates access conditions. The function receives:\n *   - `route`: The current `ActivatedRouteSnapshot` for the route being accessed.\n *   - `state`: The current `RouterStateSnapshot` representing the router's state.\n *   - `authData`: An `AuthGuardData` object containing the user's authentication status, roles, and Keycloak instance.\n * @returns A guard function of type `T` that can be used as a route `canActivate` or `canActivateChild` guard.\n *\n * @example\n * ```ts\n * import { createAuthGuard } from './auth-guard';\n * import { Routes } from '@angular/router';\n *\n * const isUserAllowed = async (route, state, authData) => {\n *   const { authenticated, grantedRoles } = authData;\n *   return authenticated && grantedRoles.realmRoles.includes('admin');\n * };\n *\n * const routes: Routes = [\n *   {\n *     path: 'admin',\n *     canActivate: [createAuthGuard(isUserAllowed)],\n *     component: AdminComponent,\n *   },\n * ];\n * ```\n */\nconst createAuthGuard = isAccessAllowed => {\n  return (next, state) => {\n    const keycloak = inject(Keycloak);\n    const authenticated = keycloak?.authenticated ?? false;\n    const grantedRoles = {\n      resourceRoles: mapResourceRoles(keycloak?.resourceAccess),\n      realmRoles: keycloak?.realmAccess?.roles ?? []\n    };\n    const authData = {\n      authenticated,\n      keycloak,\n      grantedRoles\n    };\n    return isAccessAllowed(next, state, authData);\n  };\n};\n\n/**\n * @license\n * Copyright Mauricio Gemelli Vigolo All Rights Reserved.\n *\n * Use of this source code is governed by a MIT-style license that can be\n * found in the LICENSE file at https://github.com/mauriciovigolo/keycloak-angular/blob/main/LICENSE.md\n */\n/**\n * Default value for the authorization header prefix, used to construct the Authorization token.\n */\nconst BEARER_PREFIX = 'Bearer';\n/**\n * Default name of the authorization header.\n */\nconst AUTHORIZATION_HEADER_NAME = 'Authorization';\n/**\n * Generic factory function to create an interceptor condition with default values.\n *\n * This utility allows you to define custom interceptor conditions while ensuring that\n * default values are applied to any missing fields. By using generics, you can enforce\n * strong typing when creating the fields for the interceptor condition, enhancing type safety.\n *\n * @template T - A type that extends `AuthBearerCondition`.\n * @param value - An object of type `T` (extending `AuthBearerCondition`) to be enhanced with default values.\n * @returns A new object of type `T` with default values assigned to any undefined properties.\n */\nconst createInterceptorCondition = value => ({\n  ...value,\n  bearerPrefix: value.bearerPrefix ?? BEARER_PREFIX,\n  authorizationHeaderName: value.authorizationHeaderName ?? AUTHORIZATION_HEADER_NAME,\n  shouldUpdateToken: value.shouldUpdateToken ?? (() => true)\n});\n/**\n * Conditionally updates the Keycloak token based on the provided request and conditions.\n *\n * @param req - The `HttpRequest` object being processed.\n * @param keycloak - The Keycloak instance managing authentication.\n * @param condition - An `AuthBearerCondition` object with the `shouldUpdateToken` function.\n * @returns A `Promise<boolean>` indicating whether the token was successfully updated.\n */\nconst conditionallyUpdateToken = async (req, keycloak, {\n  shouldUpdateToken = _ => true\n}) => {\n  if (shouldUpdateToken(req)) {\n    return await keycloak.updateToken().catch(() => false);\n  }\n  return true;\n};\n/**\n * Adds the Authorization header to an HTTP request and forwards it to the next handler.\n *\n * @param req - The original `HttpRequest` object.\n * @param next - The `HttpHandlerFn` function for forwarding the HTTP request.\n * @param keycloak - The Keycloak instance providing the authentication token.\n * @param condition - An `AuthBearerCondition` object specifying header configuration.\n * @returns An `Observable<HttpEvent<unknown>>` representing the HTTP response.\n */\nconst addAuthorizationHeader = (req, next, keycloak, condition) => {\n  const {\n    bearerPrefix = BEARER_PREFIX,\n    authorizationHeaderName = AUTHORIZATION_HEADER_NAME\n  } = condition;\n  const clonedRequest = req.clone({\n    setHeaders: {\n      [authorizationHeaderName]: `${bearerPrefix} ${keycloak.token}`\n    }\n  });\n  return next(clonedRequest);\n};\n\n/**\n * @license\n * Copyright Mauricio Gemelli Vigolo All Rights Reserved.\n *\n * Use of this source code is governed by a MIT-style license that can be\n * found in the LICENSE file at https://github.com/mauriciovigolo/keycloak-angular/blob/main/LICENSE.md\n */\n/**\n * Injection token for configuring the `customBearerTokenInterceptor`.\n *\n * This injection token holds an array of `CustomBearerTokenCondition` objects, which define\n * the conditions under which a Bearer token should be included in the `Authorization` header\n * of outgoing HTTP requests. Each condition provides a `shouldAddToken` function that dynamically\n * determines whether the token should be added based on the request, handler, and Keycloak state.\n */\nconst CUSTOM_BEARER_TOKEN_INTERCEPTOR_CONFIG = new InjectionToken('Include the bearer token as implemented by the provided function');\n/**\n * Custom HTTP Interceptor for dynamically adding a Bearer token to requests based on conditions.\n *\n * This interceptor uses a flexible approach where the decision to include a Bearer token in the\n * `Authorization` HTTP header is determined by a user-provided function (`shouldAddToken`).\n * This enables a dynamic and granular control over when tokens are added to HTTP requests.\n *\n * ### Key Features:\n * 1. **Dynamic Token Inclusion**: Uses a condition function (`shouldAddToken`) to decide dynamically\n *    whether to add the token based on the request, Keycloak state, and other factors.\n * 2. **Token Management**: Optionally refreshes the Keycloak token before adding it to the request.\n * 3. **Controlled Authorization**: Adds the Bearer token only when the condition function allows\n *    and the user is authenticated in Keycloak.\n *\n * ### Configuration:\n * The interceptor relies on `CUSTOM_BEARER_TOKEN_INTERCEPTOR_CONFIG`, an injection token that contains\n * an array of `CustomBearerTokenCondition` objects. Each condition specifies a `shouldAddToken` function\n * that determines whether to add the Bearer token for a given request.\n *\n * ### Workflow:\n * 1. Reads the conditions from the `CUSTOM_BEARER_TOKEN_INTERCEPTOR_CONFIG` injection token.\n * 2. Iterates through the conditions and evaluates the `shouldAddToken` function for the request.\n * 3. If a condition matches:\n *    - Optionally refreshes the Keycloak token if needed.\n *    - Adds the Bearer token to the request's `Authorization` header if the user is authenticated.\n * 4. If no conditions match, the request proceeds unchanged.\n *\n * ### Parameters:\n * @param req - The `HttpRequest` object representing the outgoing HTTP request.\n * @param next - The `HttpHandlerFn` for passing the request to the next handler in the chain.\n *\n * @returns An `Observable<HttpEvent<unknown>>` representing the HTTP response.\n *\n * ### Usage Example:\n * ```typescript\n * // Define a custom condition to include the token\n * const customCondition: CustomBearerTokenCondition = {\n *   shouldAddToken: async (req, next, keycloak) => {\n *     // Add token only for requests to the /api endpoint\n *     return req.url.startsWith('/api') && keycloak.authenticated;\n *   },\n * };\n *\n * // Configure the interceptor with the custom condition\n * export const appConfig: ApplicationConfig = {\n *   providers: [\n *     provideHttpClient(withInterceptors([customBearerTokenInterceptor])),\n *     {\n *       provide: CUSTOM_BEARER_TOKEN_INTERCEPTOR_CONFIG,\n *       useValue: [customCondition],\n *     },\n *   ],\n * };\n * ```\n */\nconst customBearerTokenInterceptor = (req, next) => {\n  const conditions = inject(CUSTOM_BEARER_TOKEN_INTERCEPTOR_CONFIG) ?? [];\n  const keycloak = inject(Keycloak);\n  const matchingCondition = conditions.find(async condition => await condition.shouldAddToken(req, next, keycloak));\n  if (!matchingCondition) {\n    return next(req);\n  }\n  return from(conditionallyUpdateToken(req, keycloak, matchingCondition)).pipe(mergeMap$1(() => keycloak.authenticated ? addAuthorizationHeader(req, next, keycloak, matchingCondition) : next(req)));\n};\n\n/**\n * @license\n * Copyright Mauricio Gemelli Vigolo All Rights Reserved.\n *\n * Use of this source code is governed by a MIT-style license that can be\n * found in the LICENSE file at https://github.com/mauriciovigolo/keycloak-angular/blob/main/LICENSE.md\n */\n/**\n * Injection token for configuring the `includeBearerTokenInterceptor`, allowing the specification\n * of conditions under which the Bearer token should be included in HTTP request headers.\n *\n * This configuration supports multiple conditions, enabling customization for different URLs.\n * It also provides options to tailor the Bearer prefix and the Authorization header name as needed.\n */\nconst INCLUDE_BEARER_TOKEN_INTERCEPTOR_CONFIG = new InjectionToken('Include the bearer token when explicitly defined int the URL pattern condition');\nconst findMatchingCondition = ({\n  method,\n  url\n}, {\n  urlPattern,\n  httpMethods = []\n}) => {\n  const httpMethodTest = httpMethods.length === 0 || httpMethods.join().indexOf(method.toUpperCase()) > -1;\n  const urlTest = urlPattern.test(url);\n  return httpMethodTest && urlTest;\n};\n/**\n * HTTP Interceptor to include a Bearer token in the Authorization header for specific HTTP requests.\n *\n * This interceptor ensures that a Bearer token is added to outgoing HTTP requests based on explicitly\n * defined conditions. By default, the interceptor does not include the Bearer token unless the request\n * matches the provided configuration (`IncludeBearerTokenCondition`). This approach enhances security\n * by preventing sensitive tokens from being unintentionally sent to unauthorized services.\n *\n * ### Features:\n * 1. **Explicit URL Matching**: The interceptor uses regular expressions to match URLs where the Bearer token should be included.\n * 2. **HTTP Method Filtering**: Optional filtering by HTTP methods (e.g., `GET`, `POST`, `PUT`) to refine the conditions for adding the token.\n * 3. **Token Management**: Ensures the Keycloak token is valid by optionally refreshing it before attaching it to the request.\n * 4. **Controlled Authorization**: Sends the token only for requests where the user is authenticated, and the conditions match.\n *\n * ### Workflow:\n * - Reads conditions from `INCLUDE_BEARER_TOKEN_INTERCEPTOR_CONFIG`, which specifies when the Bearer token should be included.\n * - If a request matches the conditions:\n *   1. The Keycloak token is refreshed if needed.\n *   2. The Bearer token is added to the Authorization header.\n *   3. The modified request is passed to the next handler.\n * - If no conditions match, the request proceeds unchanged.\n *\n * ### Security:\n * By explicitly defining URL patterns and optional HTTP methods, this interceptor prevents the leakage of tokens\n * to unintended endpoints, such as third-party APIs or external services. This is especially critical for applications\n * that interact with both internal and external services.\n *\n * @param req - The `HttpRequest` object representing the outgoing HTTP request.\n * @param next - The `HttpHandlerFn` for passing the request to the next handler in the chain.\n * @returns An `Observable<HttpEvent<unknown>>` representing the asynchronous HTTP response.\n *\n * ### Configuration:\n * The interceptor relies on `INCLUDE_BEARER_TOKEN_INTERCEPTOR_CONFIG`, an injection token that holds\n * an array of `IncludeBearerTokenCondition` objects. Each object defines the conditions for including\n * the Bearer token in the request.\n *\n * #### Example Configuration:\n * ```typescript\n * provideHttpClient(\n *   withInterceptors([includeBearerTokenInterceptor]),\n *   {\n *     provide: INCLUDE_BEARER_TOKEN_INTERCEPTOR_CONFIG,\n *     useValue: [\n *       {\n *         urlPattern: /^https:\\/\\/api\\.internal\\.myapp\\.com\\/.*\\/,\n *         httpMethods: ['GET', 'POST'], // Add the token only for GET and POST methods\n *       },\n *     ],\n *   }\n * );\n * ```\n *\n * ### Example Usage:\n * ```typescript\n * export const appConfig: ApplicationConfig = {\n *   providers: [\n *     provideHttpClient(withInterceptors([includeBearerTokenInterceptor])),\n *     provideZoneChangeDetection({ eventCoalescing: true }),\n *     provideRouter(routes),\n *   ],\n * };\n * ```\n *\n * ### Example Matching Condition:\n * ```typescript\n * {\n *   urlPattern: /^(https:\\/\\/internal\\.mycompany\\.com)(\\/.*)?$/i,\n *   httpMethods: ['GET', 'PUT'], // Optional: Match only specific HTTP methods\n * }\n * ```\n */\nconst includeBearerTokenInterceptor = (req, next) => {\n  const conditions = inject(INCLUDE_BEARER_TOKEN_INTERCEPTOR_CONFIG) ?? [];\n  const matchingCondition = conditions.find(condition => findMatchingCondition(req, condition));\n  if (!matchingCondition) {\n    return next(req);\n  }\n  const keycloak = inject(Keycloak);\n  return from(conditionallyUpdateToken(req, keycloak, matchingCondition)).pipe(mergeMap$1(() => keycloak.authenticated ? addAuthorizationHeader(req, next, keycloak, matchingCondition) : next(req)));\n};\n\n/**\n * @license\n * Copyright Mauricio Gemelli Vigolo All Rights Reserved.\n *\n * Use of this source code is governed by a MIT-style license that can be\n * found in the LICENSE file at https://github.com/mauriciovigolo/keycloak-angular/blob/main/LICENSE.md\n */\n/**\n * Provides Keycloak initialization logic for the app initializer phase.\n * Ensures Keycloak is initialized and features are configured.\n *\n * @param keycloak - The Keycloak instance.\n * @param options - ProvideKeycloakOptions for configuration.\n * @returns EnvironmentProviders or an empty array if `initOptions` is not provided.\n */\nconst provideKeycloakInAppInitializer = (keycloak, options) => {\n  const {\n    initOptions,\n    features = []\n  } = options;\n  if (!initOptions) {\n    return [];\n  }\n  return provideAppInitializer(async () => {\n    const injector = inject(EnvironmentInjector);\n    runInInjectionContext(injector, () => features.forEach(feature => feature.configure()));\n    await keycloak.init(initOptions).catch(error => console.error('Keycloak initialization failed', error));\n  });\n};\n/**\n * Configures and provides Keycloak as a dependency in an Angular application.\n *\n * This function initializes a Keycloak instance with the provided configuration and\n * optional initialization options. It integrates Keycloak into Angular dependency\n * injection system, allowing easy consumption throughout the application. Additionally,\n * it supports custom providers and Keycloak Angular features.\n *\n * If `initOptions` is not provided, the Keycloak instance will not be automatically initialized.\n * In such cases, the application must call `keycloak.init()` explicitly.\n *\n * @param options - Configuration object for Keycloak:\n *   - `config`: The Keycloak configuration, including the server URL, realm, and client ID.\n *   - `initOptions` (Optional): Initialization options for the Keycloak instance.\n *   - `providers` (Optional): Additional Angular providers to include.\n *   - `features` (Optional): Keycloak Angular features to configure during initialization.\n *\n * @returns An `EnvironmentProviders` object integrating Keycloak setup and additional providers.\n *\n * @example\n * ```ts\n * import { provideKeycloak } from './keycloak.providers';\n * import { bootstrapApplication } from '@angular/platform-browser';\n * import { AppComponent } from './app/app.component';\n *\n * bootstrapApplication(AppComponent, {\n *   providers: [\n *     provideKeycloak({\n *       config: {\n *         url: 'https://auth-server.example.com',\n *         realm: 'my-realm',\n *         clientId: 'my-client',\n *       },\n *       initOptions: {\n *         onLoad: 'login-required',\n *       },\n *     }),\n *   ],\n * });\n * ```\n */\nfunction provideKeycloak(options) {\n  const keycloak = new Keycloak(options.config);\n  const providers = options.providers ?? [];\n  const keycloakSignal = createKeycloakSignal(keycloak);\n  return makeEnvironmentProviders([{\n    provide: KEYCLOAK_EVENT_SIGNAL,\n    useValue: keycloakSignal\n  }, {\n    provide: Keycloak,\n    useValue: keycloak\n  }, ...providers, provideKeycloakInAppInitializer(keycloak, options)]);\n}\n\n/**\n * @license\n * Copyright Mauricio Gemelli Vigolo All Rights Reserved.\n *\n * Use of this source code is governed by a MIT-style license that can be\n * found in the LICENSE file at https://github.com/mauriciovigolo/keycloak-angular/blob/main/LICENSE.md\n */\n\n/**\n * Generated bundle index. Do not edit.\n */\n\nexport { AutoRefreshTokenService, CUSTOM_BEARER_TOKEN_INTERCEPTOR_CONFIG, CoreModule, HasRolesDirective, INCLUDE_BEARER_TOKEN_INTERCEPTOR_CONFIG, KEYCLOAK_EVENT_SIGNAL, KeycloakAngularModule, KeycloakAuthGuard, KeycloakBearerInterceptor, KeycloakEventType, KeycloakEventTypeLegacy, KeycloakService, UserActivityService, addAuthorizationHeader, conditionallyUpdateToken, createAuthGuard, createInterceptorCondition, createKeycloakSignal, customBearerTokenInterceptor, includeBearerTokenInterceptor, provideKeycloak, typeEventArgs, withAutoRefreshToken };\n"],
  "mappings": "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",
  "names": ["error", "KeycloakEventTypeLegacy", "realmRoles", "KeycloakEventType"]
}
